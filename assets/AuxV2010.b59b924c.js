import{Q as q}from"./QSpace.601fa16e.js";import{Q as Z}from"./QBar.57bcd1b8.js";import{Q as E}from"./QSelect.a2b6cad7.js";import{r as l,j as Se,ab as v,p as _e,k as De,o as Ne,R as u,a6 as b,Z as o,U as i,n as a,X as n,$ as c,a8 as qe,a5 as Ee,Y as y,a0 as k,a1 as f,a2 as L,bu as K,bE as X,W as ee,a7 as te,S as ae,V}from"./index.796e9a09.js";import{Q as ke}from"./QToolbar.b2280906.js";import{Q as le}from"./QBadge.d49aff15.js";import{Q as Ve}from"./QPage.976dcdc8.js";import{A as se}from"./main.esm.a63d2102.js";import{u as We}from"./use-quasar.737b824d.js";import{api as h}from"./axios.cdca92d4.js";import{l as W}from"./lodash.78b3cd6a.js";import{j as oe,n as Qe}from"./json-util.11434787.js";import{u as Ye}from"./setYearInfo.de2541ce.js";import"./QField.e93cf12f.js";import"./QChip.56e9ec7c.js";import"./QItemSection.ae9ab285.js";import"./QItemLabel.c03d9e19.js";import"./QMenu.c288f19f.js";import"./position-engine.adea6890.js";import"./selection.e36e704c.js";import"./rtl.276c3f1b.js";import"./_commonjsHelpers.b8add541.js";const Ae={class:"row q-col-gutter-md"},Be={class:"col-12 col-lg-5"},ze=i("span",{class:"text-subtitle2 q-px-sm"},"\uD3C9\uAC00\uC790 \uC120\uD0DD",-1),Re={class:"row q-col-gutter-md"},Ue={class:"col-12 col-lg-7"},Oe=i("span",{class:"text-subtitle2 q-px-sm"},"\uD3C9\uAC00\uB300\uC0C1\uC790 \uC120\uD0DD",-1),Te={class:"row q-pa-xs"},Ge={key:0,class:"col-xs-12 col-sm-4 row"},je=i("span",{class:"text-subtitle1 text-bold q-mx-sm q-pt-sm"},"\uD3C9\uAC00\uC790 : ",-1),Ie={class:"text-subtitle1 text-bold q-mr-md q-pt-sm"},Je={class:"col-xs-12 col-sm-8 row"},He={class:"q-gutter-xs q-pa-xs"},ft={__name:"AuxV2010",setup(Pe){const S=Ye(),Q=We(),x=l(!0),g=l("");l("");const G=l(0),j=l(500),I=Se(()=>({height:`${j.value}px`})),ne=l(null),ie=l(null),Y=v({rows:[]}),J=v({rows:[]}),H=l(null),P=l(null);l([]);const re=l(!1);_e(()=>{window.removeEventListener("resize",A)}),De(()=>{H.value="single",P.value="multiple",B()}),Ne(()=>{window.addEventListener("resize",A),A(),we(),Ce(),be("201")});const de=t=>{ie.value=t.api},me=v({def:{flex:1,sortable:!0,filter:!0,floatingFilter:!1,editable:!1}}),ue=v({columns:[{headerName:"#",minWidth:60,maxWidth:60,initialPinned:"left",cellStyle:{textAlign:"center"},valueGetter:function(t){return t.node.rowIndex+1}},{headerName:"",field:"",maxWidth:60,minWidth:60,initialPinned:"left",cellStyle:{textAlign:"center"},checkboxSelection:!0},{headerName:"\uC0AC\uBC88",field:"empCd",maxWidth:100,minWidth:100},{headerName:"\uC131\uBA85",field:"empNm",minWidth:80,maxWidth:80},{headerName:"\uC9C1\uAE09",field:"titlNm",minWidth:80},{headerName:"\uC18C\uC18D\uD300",field:"deptNm",minWidth:140}]}),ce=t=>{ne.value=t.api,d.value=[],t.api.forEachNode(e=>{e.data.evsEmpCd===r.value[0].empCd&&e.setSelected(!0)}),W.exports.isEmpty(d.value)&&(w.value=!1,C.value=!1,_.value=!1)},pe=v({def:{flex:1,sortable:!0,filter:!0,floatingFilter:!1,editable:!1}}),ve=v({columns:[{headerName:"#",filter:!1,minWidth:60,maxWidth:60,pinned:"left",cellStyle:{textAlign:"center"},valueGetter:function(t){return t.node.rowIndex+1}},{headerName:"",field:"",sortable:!1,filter:!1,maxWidth:60,minWidth:60,pinned:"left",cellStyle:{textAlign:"center"},checkboxSelection:!0,headerCheckboxSelection:!0},{headerName:"\uC0AC\uBC88",field:"empCd",maxWidth:100,minWidth:100},{headerName:"\uC131\uBA85",field:"empNm",minWidth:80,maxWidth:80},{headerName:"\uC18C\uC18D\uBD84\uB958",field:"depgNm",maxWidth:100,minWidth:100},{headerName:"\uC9C1\uAE09",field:"titlNm",minWidth:80},{headerName:"\uC18C\uC18D\uD300",field:"deptNm",minWidth:100},{headerName:"\uD3C9\uAC00\uC790",field:"evsEmpNm",maxWidth:100,minWidth:100}]}),r=l(),d=l(),w=l(!1),C=l(!1),_=l(!1),fe=t=>{r.value=t.api.getSelectedRows(),W.exports.isEmpty(r.value)?(x.value=!0,Y.rows=[]):(D(),x.value=!1)},he=t=>{d.value=t.api.getSelectedRows(),W.exports.isEmpty(d.value)?(w.value=!1,C.value=!1,_.value=!0):(_.value=!1,Q.screen.xs?(w.value=!0,C.value=!1):(w.value=!1,C.value=!0))},$=()=>{let t=[],e=[];for(let s=0;s<d.value.length;s++){let m={};m.stdYear=r.value[0].stdYear,m.evsEmpCd=r.value[0].empCd,m.evsCd=p.value,m.evtEmpCd=d.value[s].empCd;let ye='{"mode": "I","data":'+JSON.stringify(m)+"}";t.push(ye)}M(oe.jsonFiller(t,e))},xe=()=>{let t=[],e=[],s={};s.stdYear=r.value[0].stdYear,s.evsEmpCd=r.value[0].empCd,s.evsCd=p.value;let m='{"mode": "D","data":'+JSON.stringify(s)+"}";console.log("json Data : ",m),e.push(m),M(oe.jsonFiller(t,e))},F=l(0),ge=t=>(F.value=t,{minHeight:t?`calc(100vh - ${t}px)`:"100vh"}),A=()=>{j.value=window.innerHeight-F.value-180},B=async()=>{try{const t=await h.post("/api/aux/aux2010_list",{paramSetYear:S.setYear,paramDeptCd:z.value,paramSearchValue:g.value});J.rows=t.data.data}catch(t){console.error("Error fetching users:",t)}},D=async()=>{try{const t=await h.post("/api/aux/aux2010_select",{paramSetYear:S.setYear,paramDeptCd:R.value,paramTitlCd:O.value,paramEvsEmpCd:r.value[0].empCd,paramEvsCd:p.value});Y.rows=t.data.data,G.value+=1}catch(t){console.error("Error fetching users:",t)}},M=t=>{h.post("/api/aux/aux2010_save",t).then(e=>{re.value=!1;let s={};s.rtn=e.data.rtn,s.rtnMsg=e.data.rtnMsg,Qe.notifyView(s)}).catch(e=>{console.log("error: ",e)})},N=l([]),z=l(""),R=l("");async function we(t){try{const e=await h.post("/api/mst/dept_option_list",{paramSetYear:S.setYear});N.value=e.data.data,N.value.push({deptCd:"",deptNm:"\uC804\uCCB4"})}catch(e){console.error("Error fetching users:",e)}}const U=l([]),O=l("");async function Ce(t){try{const e=await h.post("/api/mst/titl_option_list",{paramSetYear:S.setYear});U.value=e.data.data,U.value.push({titlCd:"",titlNm:"\uC804\uCCB4"})}catch(e){console.error("Error fetching users:",e)}}const T=l([]),p=l(null);async function be(t){try{const e=await h.post("/api/mst/comm_option_list",{paramCommCd1:t});T.value=e.data.data,p.value=T.value[0].commCd}catch(e){console.error("Error fetching users:",e)}}return(t,e)=>(u(),b(Ve,{class:"q-pa-xs-xs q-pa-sm-md","style-fn":ge},{default:o(()=>[i("div",Ae,[i("div",Be,[a(te,{bordered:""},{default:o(()=>[a(Z,{class:"q-px-sm"},{default:o(()=>[a(n(c),{name:"list_alt"}),ze,a(q)]),_:1}),a(qe,{align:"right",class:"q-pa-none"},{default:o(()=>[a(ke,{class:"row"},{default:o(()=>[i("div",Re,[a(E,{dense:"","stack-label":"","options-dense":"",class:"q-px-md q-mr-sm","label-color":"orange",modelValue:z.value,"onUpdate:modelValue":[e[0]||(e[0]=s=>z.value=s),B],options:N.value,"option-value":"deptCd","option-label":"deptNm","option-disable":"inactive","emit-value":"","map-options":"",style:{"min-width":"150px","max-width":"150px"},label:"\uC18C\uC18D\uD300"},null,8,["modelValue","options"]),a(Ee,{"stack-label":"","label-color":"orange","bottom-slots":"",modelValue:g.value,"onUpdate:modelValue":e[2]||(e[2]=s=>g.value=s),label:"\uAC80\uC0C9",dense:"",class:"q-pb-none",style:{width:"120px"}},{append:o(()=>[g.value!==""?(u(),b(n(c),{key:0,name:"close",onClick:e[1]||(e[1]=s=>g.value=""),class:"cursor-pointer"})):y("",!0)]),_:1},8,["modelValue"])]),a(q),a(n(k),{outline:"",color:"positive",dense:"",onClick:B},{default:o(()=>[a(n(c),{name:"search",size:"xs"}),f(" \uC870\uD68C ")]),_:1}),_.value?(u(),b(n(k),{key:0,outline:"",color:"primary",dense:"",class:"q-ma-xs q-pr-lg",onClick:xe},{default:o(()=>[a(n(c),{name:"delete",size:"xs",class:"q-mr-sm"}),f(" \uC0AD\uC81C\uD558\uAE30 ")]),_:1})):y("",!0)]),_:1})]),_:1}),a(L,{size:"3px"}),a(K,{class:"q-pa-xs"},{default:o(()=>[i("div",{style:X(I.value)},[a(n(se),{style:{width:"100%",height:"100%"},class:ee(n(Q).dark.isActive?"ag-theme-alpine-dark":"ag-theme-alpine"),columnDefs:ue.columns,rowData:J.rows,defaultColDef:me.def,rowSelection:H.value,onSelectionChanged:fe,onGridReady:de},null,8,["class","columnDefs","rowData","defaultColDef","rowSelection"])],4)]),_:1})]),_:1})]),i("div",Ue,[a(te,{bordered:""},{default:o(()=>[a(Z,{class:"q-px-sm"},{default:o(()=>[a(n(c),{name:"list_alt"}),Oe]),_:1}),i("div",Te,[n(W.exports.isEmpty)(r.value)?y("",!0):(u(),ae("div",Ge,[je,i("span",Ie,V(r.value[0].empNm)+" ( "+V(r.value[0].empCd)+" )",1),a(q),w.value?(u(),b(n(k),{key:0,outline:"",color:"primary",dense:"",class:"q-ma-xs q-pr-lg",onClick:$},{default:o(()=>[a(le,{color:"orange",floating:""},{default:o(()=>[f(V(d.value.length),1)]),_:1}),a(n(c),{name:"save",size:"xs",class:"q-mr-sm"}),f(" \uC800\uC7A5\uD558\uAE30 ")]),_:1})):y("",!0)])),i("div",Je,[a(E,{dense:"",disable:x.value,"stack-label":"","options-dense":"",class:"q-px-md","label-color":"orange",modelValue:p.value,"onUpdate:modelValue":[e[3]||(e[3]=s=>p.value=s),D],options:T.value,"option-value":"commCd","option-label":"commNm","option-disable":"inactive","emit-value":"","map-options":"",style:{"min-width":"120px","max-width":"120px"},label:"\uD3C9\uAC00\uC2B9\uC778\uAD6C\uBD84"},null,8,["disable","modelValue","options"]),a(E,{dense:"",disable:x.value,"stack-label":"","options-dense":"",class:"q-px-md q-mr-xs","label-color":"orange",modelValue:R.value,"onUpdate:modelValue":[e[4]||(e[4]=s=>R.value=s),D],options:N.value,"option-value":"deptCd","option-label":"deptNm","option-disable":"inactive","emit-value":"","map-options":"",style:{"min-width":"140px","max-width":"140px"},label:"\uC18C\uC18D\uD300"},null,8,["disable","modelValue","options"]),a(E,{dense:"",disable:x.value,"stack-label":"","options-dense":"",class:"q-px-md","label-color":"orange",modelValue:O.value,"onUpdate:modelValue":[e[5]||(e[5]=s=>O.value=s),D],options:U.value,"option-value":"titlCd","option-label":"titlNm","option-disable":"inactive","emit-value":"","map-options":"",style:{"min-width":"90px","max-width":"90px"},label:"\uC9C1\uAE09"},null,8,["disable","modelValue","options"]),a(q),i("div",He,[C.value?(u(),b(n(k),{key:0,outline:"",color:"primary",dense:"",class:"q-ma-xs q-pr-lg",onClick:$},{default:o(()=>[a(le,{color:"orange",floating:""},{default:o(()=>[f(V(d.value.length),1)]),_:1}),a(n(c),{name:"save",size:"xs",class:"q-mr-sm"}),f(" \uC800\uC7A5\uD558\uAE30 ")]),_:1})):y("",!0)])])]),a(L,{size:"3px"}),a(K,{class:"q-pa-xs"},{default:o(()=>[(u(),ae("div",{key:G.value,style:X(I.value)},[a(n(se),{style:{width:"100%",height:"100%"},class:ee(n(Q).dark.isActive?"ag-theme-alpine-dark":"ag-theme-alpine"),columnDefs:ve.columns,rowData:Y.rows,rowSelection:P.value,defaultColDef:pe.def,onSelectionChanged:he,onGridReady:ce},null,8,["class","columnDefs","rowData","rowSelection","defaultColDef"])],4))]),_:1})]),_:1})])])]),_:1}))}};export{ft as default};
