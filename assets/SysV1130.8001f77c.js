import{Q as z}from"./QBar.57bcd1b8.js";import{Q as $}from"./QSelect.a2b6cad7.js";import{Q as E}from"./QToolbar.b2280906.js";import{r as s,j as _e,ab as h,p as Se,o as ye,R as f,a6 as S,Z as o,h as Ce,$ as g,U as p,n as t,X as r,a8 as B,a0 as W,a1 as O,a2 as J,bu as H,bE as j,W as T,a7 as F,Y as y,S as M,V as Ne,I as Z}from"./index.796e9a09.js";import{Q as De}from"./QSpace.601fa16e.js";import{Q as be}from"./QPage.976dcdc8.js";import{C as L}from"./ClosePopup.d4490053.js";import{A as X}from"./main.esm.a63d2102.js";import{u as Ve}from"./use-quasar.737b824d.js";import{api as v}from"./axios.cdca92d4.js";import{_ as u,a as Ye,b as Pe,c as We,d as Re,e as ke,f as qe,g as Ue,h as Ae}from"./CompToggleLoc.7f30135e.js";import{l as R}from"./lodash.78b3cd6a.js";import{j as Qe,n as Ie}from"./json-util.11434787.js";import"./QField.e93cf12f.js";import"./QChip.56e9ec7c.js";import"./QItemSection.ae9ab285.js";import"./QItemLabel.c03d9e19.js";import"./QMenu.c288f19f.js";import"./position-engine.adea6890.js";import"./selection.e36e704c.js";import"./rtl.276c3f1b.js";import"./_commonjsHelpers.b8add541.js";const Ge={class:"row q-col-gutter-md"},ze={class:"col-12 col-md-4"},$e=p("span",{class:"text-subtitle2 q-px-sm"},"\uD504\uB85C\uADF8\uB7A8 \uB9AC\uC2A4\uD2B8",-1),Ee={class:"col-12 col-md-8"},Be=p("span",{class:"text-subtitle2 q-px-sm"},"\uC0AC\uC6A9\uC790 \uAD8C\uD55C\uAD00\uB9AC",-1),Oe={key:1,class:"text-subtitle1 text-bold shadow-5 q-px-lg q-py-xs bg-secondary rounded-borders"},Je={key:0,class:"q-pl-xs"},ha={__name:"SysV1130",setup(He){const w=Ve(),k=s(500),q=_e(()=>({height:`${k.value}px`})),K=s(null),ee=s(null),U=h({rows:[]}),C=s(),d=s(),ae=s(),A=s(null),i=h({rows:[]}),N=s([]),c=s([]),x=s(!1),te=e=>{K.value=e.api},le=e=>{ee.value=e.api},se={setup(e){const{params:a}=e;return()=>Ce(g,{name:a.value,color:"",size:"xs"})}},oe=h({def:{flex:1,sortable:!0,filter:!1,floatingFilter:!1,editable:!1}}),re=h({columns:[{headerName:"#",minWidth:60,maxWidth:60,sortable:!1,valueGetter:function(e){return e.node.rowIndex+1}},{headerName:"\uCF54\uB4DC",field:"progId",minWidth:100,maxWidth:100,filter:!0},{headerName:"Icon",field:"iconNm",minWidth:70,cellStyle:{textAlign:"center"},cellRenderer:se},{headerName:"\uD504\uB85C\uADF8\uB7A8\uBA85",field:"progNm",minWidth:140,filter:!0}]}),ne=h({def:{flex:1,sortable:!0,filter:!1,floatingFilter:!1,editable:!1}}),de=h({columns:[{headerName:"#",width:60,pinned:"left",valueGetter:function(e){return e.node.rowIndex+1}},{headerName:"ID",field:"userId",minWidth:120,maxWidth:120,filter:!0,sortable:!0,resizable:!0,pinned:"left"},{headerName:"\uC0AC\uC6A9\uC790\uBA85",field:"userNm",minWidth:130,maxWidth:130,filter:!0,pinned:"left"},{headerName:"\uC0AC\uBC88",field:"empCd",minWidth:100,maxWidth:100,filter:!0},{headerName:"\uC870\uD68C",headerComponent:u,headerComponentParams:{headerCheckYn:"",updateSelectedValue:e=>{m("scrYn",e.value?"Y":"N")}},field:"scrYn",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"},cellRenderer:Ye,cellRendererParams:{updateSelectedValue:e=>{n()}}},{headerName:"\uC785\uB825",headerComponent:u,headerComponentParams:{headerCheckYn:"",updateSelectedValue:e=>{m("newYn",e.value?"Y":"N")}},field:"newYn",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"},cellRenderer:Pe,cellRendererParams:{updateSelectedValue:e=>{n()}}},{headerName:"\uC218\uC815",headerComponent:u,headerComponentParams:{headerCheckYn:"",updateSelectedValue:e=>{m("dbgYn",e.value?"Y":"N")}},field:"dbgYn",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"},cellRenderer:We,cellRendererParams:{updateSelectedValue:e=>{n()}}},{headerName:"\uC0AD\uC81C",headerComponent:u,headerComponentParams:{headerCheckYn:"",updateSelectedValue:e=>{m("delYn",e.value?"Y":"N")}},field:"delYn",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"},cellRenderer:Re,cellRendererParams:{updateSelectedValue:e=>{n()}}},{headerName:"\uCD9C\uB825",headerComponent:u,headerComponentParams:{headerCheckYn:"",updateSelectedValue:e=>{m("rptYn",e.value?"Y":"N")}},field:"rptYn",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"},cellRenderer:ke,cellRendererParams:{updateSelectedValue:e=>{n()}}},{headerName:"\uC5D1\uC140",headerComponent:u,headerComponentParams:{headerCheckYn:"",updateSelectedValue:e=>{m("excYn",e.value?"Y":"N")}},field:"excYn",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"},cellRenderer:qe,cellRendererParams:{updateSelectedValue:e=>{n()}}},{headerName:"\uB9C8\uAC10 ",headerComponent:u,headerComponentParams:{headerCheckYn:"",updateSelectedValue:e=>{m("locYn",e.value?"Y":"N")}},field:"locYn",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"},cellRenderer:Ue,cellRendererParams:{updateSelectedValue:e=>{n()}}},{headerName:"\uC2B9\uC778",headerComponent:u,headerComponentParams:{headerCheckYn:"",updateSelectedValue:e=>{m("appYn",e.value?"Y":"N")}},field:"appYn",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"},cellRenderer:Ae,cellRendererParams:{updateSelectedValue:e=>{n()}}}]}),ie=e=>{C.value=e.api.getSelectedRows(),R.exports.isEmpty(C.value)||(d.value=C.value[0],b(d.value.progId))},ce=e=>{ae.value=e.api.getSelectedRows()},n=()=>{c.value=[];for(let e=0;N.value.length>e;e++)JSON.stringify(N.value[e])!==JSON.stringify(i.rows[e])&&c.value.push(i.rows[e]);x.value=c.value.length>0},me=s(null),m=(e,a)=>{for(let l=0;l<i.rows.length;l++)i.rows[l][e]&&(i.rows[l][e]=a);n()},Q=s(0),ue=e=>(Q.value=e,{minHeight:e?`calc(100vh - ${e}px)`:"100vh"}),D=()=>{k.value=window.innerHeight-Q.value-180};Se(()=>{window.removeEventListener("resize",D)}),ye(()=>{window.addEventListener("resize",D),D(),A.value="single",I(),we("701")});const I=()=>{ve(),G()},pe=()=>{let e=[],a=[];for(let l=0;l<c.value.length;l++){c.value[l].progId=d.value.progId;let xe='{"mode": "'+c.value[l].iuD+'","data":'+JSON.stringify(c.value[l])+"}";e.push(xe)}R.exports.isEmpty(e)&&R.exports.isEmpty(a)?w.dialog({dark:!0,title:"\uC548\uB0B4",message:"\uBCC0\uACBD\uB41C \uC790\uB8CC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. "}).onOk(()=>{}).onCancel(()=>{}).onDismiss(()=>{}):(ge(Qe.jsonFiller(e,a)),setTimeout(()=>{b(d.value.progId)},500))},he=e=>{G()},fe=e=>{b(d.value.progId)},G=async()=>{try{const e=await v.post("/api/sys/sys5010_menu_list",{groupCd:_.value});U.rows=e.data.data}catch(e){console.error("Error fetching users:",e)}d.value=null,i.rows=[]},b=async e=>{try{const a=await v.post("/api/sys/sys1130_user_list",{paramUserId:"daon",paramDeptCd:P.value,paramProgId:e});i.rows=a.data.data,N.value=JSON.parse(JSON.stringify(a.data.data)),c.value=[],x.value=!1}catch(a){console.error("Error fetching users:",a)}},ge=e=>{v.post("/api/sys/sys1110_grntp_save",e).then(a=>{x.value=!1;let l={};l.rtn=a.data.rtn,l.rtnMsg=a.data.rtnMsg,Ie.notifyView(l)}).catch(a=>{console.log("error: ",a)})},V=s([]),_=s(""),ve=async()=>{try{const e=await v.post("/api/sys/prog_group_list",{paramUserId:""});V.value=e.data.data,V.value.push({groupNm:"\uC804\uCCB4",groupCd:""}),_.value=""}catch(e){console.error("Error fetching users:",e)}},Y=s([]),P=s(null);async function we(e){try{const a=await v.post("/api/mst/comm_option_list",{paramCommCd1:e});Y.value=a.data.data,Y.value.push({commCd:"",commNm:"\uC804\uCCB4"})}catch(a){console.error("Error fetching users:",a)}}return(e,a)=>(f(),S(be,{class:"q-pa-xs-xs q-pa-sm-md","style-fn":ue},{default:o(()=>[p("div",Ge,[p("div",ze,[t(F,{bordered:""},{default:o(()=>[t(z,{class:"q-px-sm"},{default:o(()=>[t(r(g),{name:"list_alt"}),$e]),_:1}),t(B,{align:"right",class:"q-pa-none"},{default:o(()=>[t(E,{class:"row"},{default:o(()=>[t($,{dense:"","stack-label":"","options-dense":"",class:"q-pb-sm q-pl-sm q-mr-lg","label-color":"orange",modelValue:_.value,"onUpdate:modelValue":[a[0]||(a[0]=l=>_.value=l),he],options:V.value,"option-value":"groupCd","option-label":"groupNm","option-disable":"inactive","emit-value":"","map-options":"",style:{"min-width":"150px","max-width":"150px"},label:"\uADF8\uB8F9\uC120\uD0DD"},null,8,["modelValue","options"]),t(r(W),{outline:"",color:"positive",dense:"",onClick:I},{default:o(()=>[t(r(g),{class:"q-mr-sm",name:"refresh",size:"xs"}),O("\uB2E4\uC2DC \uBD88\uB7EC\uC624\uAE30")]),_:1})]),_:1})]),_:1}),t(J,{size:"3px"}),t(H,{class:"q-pa-xs"},{default:o(()=>[p("div",{style:j(q.value)},[t(r(X),{ref:"myGrid",style:{width:"100%",height:"100%"},class:T(r(w).dark.isActive?"ag-theme-alpine-dark":"ag-theme-alpine"),columnDefs:re.columns,rowData:U.rows,defaultColDef:oe.def,rowSelection:A.value,onSelectionChanged:ie,onGridReady:te},null,8,["class","columnDefs","rowData","defaultColDef","rowSelection"])],4)]),_:1})]),_:1})]),p("div",Ee,[t(F,{bordered:""},{default:o(()=>[t(z,{class:"q-px-sm"},{default:o(()=>[t(r(g),{name:"list_alt"}),Be]),_:1}),t(B,{align:"right",class:"q-pa-none"},{default:o(()=>[t(E,{class:"row"},{default:o(()=>[d.value?(f(),S($,{key:0,dense:"","options-dense":"",class:"q-pb-sm q-pl-sm q-mr-lg","label-color":"orange",modelValue:P.value,"onUpdate:modelValue":[a[1]||(a[1]=l=>P.value=l),fe],options:Y.value,"option-value":"commCd","option-label":"commNm","option-disable":"inactive","emit-value":"","map-options":"",style:{"min-width":"150px","max-width":"150px"},label:"\uC18C\uC18D\uD300"},null,8,["modelValue","options"])):y("",!0),d.value?(f(),M("span",Oe,Ne(d.value.progNm),1)):y("",!0),t(De),x.value?Z((f(),S(r(W),{key:2,outline:"",dense:"",color:"primary",onClick:pe,class:"q-px-sm q-mr-sm"},{default:o(()=>[t(r(g),{class:"q-mr-xs",name:"save",size:"xs"}),O(" \uAD8C\uD55C \uC801\uC6A9\uD558\uAE30 ")]),_:1})),[[L]]):y("",!0),Z((f(),S(r(W),{outline:"",dense:"",color:"primary",class:"q-px-sm"},{default:o(()=>[t(r(g),{name:"close",size:"xs"}),r(w).screen.xs?y("",!0):(f(),M("span",Je,"\uB2EB\uAE30"))]),_:1})),[[L]])]),_:1})]),_:1}),t(J,{size:"3px"}),t(H,{class:"q-pa-xs"},{default:o(()=>[p("div",{style:j(q.value)},[t(r(X),{ref:"myGrid1",style:{width:"100%",height:"100%"},class:T(r(w).dark.isActive?"ag-theme-alpine-dark":"ag-theme-alpine"),columnDefs:de.columns,rowData:i.rows,defaultColDef:ne.def,rowSelection:me.value,onSelectionChanged:ce,onCellValueChanged:n,onGridReady:le},null,8,["class","columnDefs","rowData","defaultColDef","rowSelection"])],4)]),_:1})]),_:1})])])]),_:1}))}};export{ha as default};
