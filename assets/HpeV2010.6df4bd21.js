import{Q as M}from"./QBanner.ac724ef6.js";import{Q as Y}from"./QSpace.601fa16e.js";import{Q as ue,a as V}from"./QBreadcrumbs.a225de0b.js";import{r as p,ab as B,j as me,p as pe,k as fe,o as he,R as v,a6 as x,Z as t,n as e,U as a,W as C,X as o,$ as g,a1 as n,a7 as m,a2 as R,bu as G,a4 as $,a0 as y,Y as S,bE as ve,V as _,S as ge,ad as _e,F as xe,I as U,a5 as we,a8 as be,a9 as ye}from"./index.796e9a09.js";import{Q as Ce}from"./QItemLabel.c03d9e19.js";import{Q as P}from"./QToolbar.b2280906.js";import{Q as O}from"./QBadge.d49aff15.js";import{Q as qe}from"./QTooltip.f083d71e.js";import{Q as Se}from"./QBar.57bcd1b8.js";import{Q as ke}from"./QForm.7bb4004a.js";import{Q as De}from"./QPage.976dcdc8.js";import{C as T}from"./ClosePopup.d4490053.js";import{A as He}from"./main.esm.a63d2102.js";import"./lodash.78b3cd6a.js";import{api as F}from"./axios.cdca92d4.js";import{j as N,n as Qe}from"./json-util.11434787.js";import{u as Ye}from"./use-quasar.737b824d.js";import{u as Ne}from"./setUserInfo.024a2a24.js";import{u as Ee}from"./setYearInfo.de2541ce.js";import"./position-engine.adea6890.js";import"./selection.e36e704c.js";import"./_commonjsHelpers.b8add541.js";const ze={class:"row"},Ae={class:"col-xs-12 col-sm-12 col-lg-8"},Ve={class:"row q-col-gutter-x-sm"},Be={class:"col-xs-12 col-sm-12"},Re=a("span",{class:"text-subtitle1 text-bold"}," \uBAA9\uD45C\uC124\uC815\uC5D0 \uB300\uD55C \uC2B9\uC778\uC791\uC5C5\uC785\uB2C8\uB2E4.",-1),Ue=a("br",null,null,-1),Oe=a("span",{class:"text-teal text-bold"},"\uC2B9\uC778\uB300\uAE30",-1),Te=a("br",null,null,-1),Fe=a("span",{class:"text-teal text-bold"},"\uC2B9\uC778\uBC18\uB824",-1),Je=a("br",null,null,-1),We={class:"col-xs-12 col-sm-12 col-lg-4 q-my-sm"},je={class:"row"},Ie={class:"text-bold text-subtitle2 q-pr-sm text-orange"},Le={class:"row q-col-gutter-x-lg"},Me={class:"col-xs-12 col-md-12 col-lg-4"},Ge=a("span",{class:"text-bold text-subtitle1 text-red"}," \uBC18\uB824\uC0AC\uC720 ",-1),$e={class:"col-xs-12 col-md-12 col-lg-8"},Pe={class:"row q-gutter-x-sm"},Ze={class:"row"},Xe={class:"row"},Ke=a("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uC21C\uBC88",-1),et=a("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uBAA9\uD45C\uC124\uC815",-1),tt=["innerHTML"],st=a("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uAE30\uC900\uC124\uC815",-1),at={class:"q-pa-xs"},lt={class:"q-px-sm"},ot=a("br",null,null,-1),rt={class:"q-px-sm"},nt=a("br",null,null,-1),ct={class:"q-px-sm"},it=a("br",null,null,-1),dt={class:"q-px-sm"},ut=a("br",null,null,-1),mt={class:"q-px-sm"},pt=a("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uAC00\uC911\uCE58",-1),ft=a("div",null,"\uBAA9\uD45C\uBC18\uB824\uC0AC\uC720 \uB4F1\uB85D (\uC804\uCCB4\uC801\uC6A9)",-1),ht=45,Ot={__name:"HpeV2010",setup(vt){const k=Ne(),Z=Ee();p("2011101");const D=p(!1),w=p(null),X=()=>{w.value?u.dialog({dark:!0,title:"\uC548\uB0B4",html:!0,message:"\uAE30\uC874\uC5D0 \uC791\uC131\uD55C \uBC18\uB824\uB0B4\uC6A9\uC774 \uC788\uC2B5\uB2C8\uB2E4. <br>\uB2E4\uC2DC\uC791\uC131 \uB610\uB294 \uAE30\uC874\uB0B4\uC6A9\uC744 \uC218\uC815\uD558\uC2E4 \uC218 \uC788\uC2B5\uB2C8\uB2E4",ok:{label:"\uB2E4\uC2DC\uC791\uC131",color:"primary"},cancel:{label:"\uC218\uC815\uD558\uAE30",color:"secondary"}}).onOk(()=>{w.value=null}).onCancel(()=>{}).onDismiss(()=>{D.value=!0}):D.value=!0},c=B({rows:[],rowsSel:[]}),J=p(300),W=p(90),u=Ye();let b=null;const j=p(300);me(()=>({height:`${j.value}px`}));const H=p(null),K=l=>{H.value=l.api,H.value.setGridOption("headerHeight",45),H.value.setGridOption("rowHeight",45),H.value.deselectAll()},ee=B({group:{flex:1,sortable:!0,filter:!0,floatingFilter:!1,editable:!1}}),te=B({group:[{headerName:"#",width:50,pinned:"left",sortable:!1,filter:!1,valueGetter:function(l){return l.node.rowIndex+1}},{headerName:"\uC131\uBA85",field:"evtEmpNm",minWidth:80,maxWidth:80,resizable:!0},{headerName:"\uC18C\uC18D\uD300",field:"evtDeptNm",minWidth:100,resizable:!0},{headerName:"\uC9C1\uAE09",field:"evtTitlNm",minWidth:80,maxWidth:80,resizable:!0},{headerName:"\uC9C4\uD589\uC0C1\uD0DC",field:"statusMessage",minWidth:105,maxWidth:105,cellStyle:l=>l.data.authCnt0+l.data.authCnt1+l.data.authCnt2+l.data.authCnt3+l.data.authCnt4+l.data.authCnt5===0?u.dark.isActive?{color:"orange"}:{color:"orange"}:u.dark.isActive?{color:"teal"}:{color:"teal"}}]});pe(()=>{window.removeEventListener("resize",E)}),fe(()=>{z()}),he(()=>{window.addEventListener("resize",E),E()}),p({stdYear:"",evtEmpCd:"",workNo:0,returnDoc:"",status:""});const f=p([]),se=p({status_1:0,status_3:0}),ae=l=>{f.value=l.api.getSelectedRows(),f.value.length===1&&ne(f.value[0].stdYear,f.value[0].evsEmpCd,f.value[0].evtEmpCd)},I=p(0),le=l=>(I.value=l,{minHeight:l?`calc(100vh - ${l}px)`:"100vh"}),E=()=>{j.value=window.innerHeight-I.value-730},oe=()=>{u.dialog({dark:!0,title:"\uC2B9\uC778\uB300\uAE30 \uCDE8\uC18C\uD558\uAE30",message:"\uC120\uD0DD\uB41C \uC790\uB8CC\uC758 \uC2B9\uC778\uC694\uCCAD\uC744 \uCDE8\uC18C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? ",ok:{push:!0,color:"orange"},cancel:{push:!0,color:"grey-7"}}).onOk(()=>{b="S";let l=[],r=[],s={};s.stdYear=f.value[0].stdYear,s.evtEmpCd=f.value[0].evtEmpCd,s.status="0",s.acceptYn="N";let h='{"mode": "'+b+'","data":'+JSON.stringify(s)+"}";l.push(h),Q(N.jsonFiller(l,r))}).onCancel(()=>{}).onDismiss(()=>{})},L=(l,r,s,h)=>{u.dialog({dark:!0,title:s,message:"\uC120\uD0DD\uB41C "+h+"\uAC74 \uC790\uB8CC\uB97C \uBAA8\uB450 \uC2B9\uC778 \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? ",ok:{push:!0,color:"orange"},cancel:{push:!0,color:"grey-7"}}).onOk(()=>{b="S";let d=[],A=[],q={};q.stdYear=f.value[0].stdYear,q.evtEmpCd=f.value[0].evtEmpCd,q.status=l,q.acceptYn=r;let de='{"mode": "'+b+'","data":'+JSON.stringify(q)+"}";d.push(de),Q(N.jsonFiller(d,A))}).onCancel(()=>{}).onDismiss(()=>{})},re=()=>{u.dialog({dark:!0,title:"\uBC18\uB824\uD558\uAE30",message:"\uC790\uB8CC\uB97C \uBAA8\uB450 \uBC18\uB824 \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? ",ok:{push:!0,color:"orange"},cancel:{push:!0,color:"grey-7"}}).onOk(()=>{b="R";let l=[],r=[],s={};s.stdYear=f.value[0].stdYear,s.evtEmpCd=f.value[0].evtEmpCd,s.status="2",s.returnDoc=w.value;let h='{"mode": "'+b+'","data":'+JSON.stringify(s)+"}";l.push(h),Q(N.jsonFiller(l,r))}).onCancel(()=>{}).onDismiss(()=>{})},z=async()=>{try{const l=await F.post("/api/hpe/hpe2010_list",{paramSetYear:Z.setYear,paramEmpCd:k.setEmpCd});c.rows=l.data.data,c.rows.length===0&&(W.value=220);const r=c.rows.length*ht;J.value=W.value+r}catch(l){console.error("Error fetching users:",l)}},i=p({cancelHide:!1,sendHide:!1,sendCancelHide:!1,returnHide:!1,acceptUpdate:!1}),ne=async(l,r,s)=>{try{const h=await F.post("/api/hpe/hpe2010_select_list",{paramSetYear:l,paramEvsEmpCd:r,paramEvtEmpCd:s});c.rowsSel=h.data.data,w.value=null,i.value.cancelHide=!1,i.value.sendHide=!1,i.value.sendCancelHide=!1,i.value.returnHide=!1,i.value.acceptUpdate=!1;for(let d=0;d<c.rowsSel.length;d++)c.rowsSel[d].status==="1"&&c.rowsSel[d].acceptYn!=="Y"&&(i.value.acceptUpdate=!0),c.rowsSel[d].status==="1"&&c.rowsSel[d].acceptYn==="Y"&&(i.value.sendHide=!0,i.value.cancelHide=!0,w.value=c.rowsSel[d].returnDoc),c.rowsSel[d].status==="2"&&(i.value.returnHide=!0,w.value=c.rowsSel[d].returnDoc),c.rowsSel[d].status==="3"&&c.rowsSel[d].acceptYn!=="Y"&&(i.value.sendCancelHide=!0);i.value.acceptUpdate&&ce(l,s)}catch(h){console.error("Error fetching users:",h)}},Q=l=>{F.post("/api/hpe/hpe2010_save",l).then(r=>{if(b!=="A"){let s={};s.rtn=r.data.rtn,s.rtnMsg=r.data.rtnMsg,Qe.notifyView(s)}c.rowsSel=[],i.value.cancelHide=!1,i.value.sendHide=!1,i.value.sendCancelHide=!1,i.value.acceptUpdate=!1,z()}).catch(r=>{console.log("error: ",r)})},ce=(l,r)=>{b="A";let s=[],h=[],d={};d.stdYear=l,d.empCd=r,d.acceptYn="Y";let A='{"mode": "'+b+'","data":'+JSON.stringify(d)+"}";s.push(A),Q(N.jsonFiller(s,h))},ie={localeText:{noRowsToShow:"\uC870\uD68C \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}};return(l,r)=>(v(),x(De,{class:"q-pa-xs-xs q-pa-sm-md","style-fn":le},{default:t(()=>[e(m,{class:"q-pa-sm"},{default:t(()=>[a("div",ze,[a("div",Ae,[a("div",Ve,[a("div",Be,[e(M,{rounded:"",class:C(o(u).dark.isActive?"bg-grey-9":"bg-grey-3"),style:{height:"100%"}},{avatar:t(()=>[e(o(g),{name:"menu_book",color:"primary",size:"md"})]),default:t(()=>[Re,Ue,n(" 1. "),Oe,n(" \uC790\uB8CC\uB9CC \uC2B9\uC778\uD558\uC2E4 \uC218 \uC788\uC2B5\uB2C8\uB2E4."),Te,n(" 2. "),Fe,n("\uC2DC \uBC18\uB824\uC0AC\uC720\uB97C \uC791\uC131\uD569\uB2C8\uB2E4."),Je]),_:1},8,["class"])])])]),a("div",We,[e(m,{class:C(["q-ml-sm-md q-pa-sm",o(u).screen.xs?"q-mt-xs":"row flex-center"]),style:{height:"100%"}},{default:t(()=>[a("div",je,[e(Y),a("span",Ie,[n("\uD3C9\uAC00\uC790"),e(o(g),{name:"chevron_right",size:"xs"})]),e(ue,{separator:"|",class:"text-orange text-bold","active-color":"secondary"},{default:t(()=>[e(V,{icon:"room_preferences",label:o(k).setDeptNm,style:{width:"90px"}},null,8,["label"]),e(V,{icon:"star",label:o(k).setTitlNm,style:{width:"60px"}},null,8,["label"]),e(V,{icon:"person",label:o(k).setEmpNm,style:{width:"70px"}},null,8,["label"])]),_:1})])]),_:1},8,["class"])])])]),_:1}),e(R,{spaced:""}),e(m,{class:"q-pa-sm"},{default:t(()=>[e(G,{class:C(["text-center q-pa-sm q-mb-sm",o(u).dark.isActive?"bg-teal-7":"bg-teal-3"])},{default:t(()=>[e(Ce,{class:"text-h6"},{default:t(()=>[n("\uBAA9\uD45C\uC124\uC815 / \uC2B9\uC778\uD558\uAE30")]),_:1})]),_:1},8,["class"]),a("div",Le,[a("div",Me,[e(m,{class:"q-pa-sm"},{default:t(()=>[e(P,{class:"row q-pa-none"},{default:t(()=>[e($,{color:"red","text-color":"white",size:"md"},{default:t(()=>[n("1\uBC88")]),_:1}),e(Y),e(o(y),{outline:"",color:"grey",dense:"",onClick:z},{default:t(()=>[e(o(g),{name:"refresh",size:"xs",class:"q-mr-xs"}),n(" \uB2E4\uC2DC \uBD88\uB7EC\uC624\uAE30 ")]),_:1}),i.value.cancelHide?(v(),x(o(y),{key:0,outline:"",color:"grey",dense:"",onClick:oe,class:"q-ml-xs"},{default:t(()=>[e(o(g),{name:"refresh",size:"xs",class:"q-mr-xs"}),n(" \uC2B9\uC778\uB300\uAE30\uCDE8\uC18C ")]),_:1})):S("",!0)]),_:1}),a("div",{style:ve({height:J.value+30+"px"})},[e(o(He),{style:{width:"100%",height:"100%"},class:C(o(u).dark.isActive?"ag-theme-alpine-dark":"ag-theme-alpine"),columnDefs:te.group,rowData:c.rows,defaultColDef:ee.group,rowSelection:"single",onSelectionChanged:ae,onGridReady:K,"grid-options":ie},null,8,["class","columnDefs","rowData","defaultColDef"])],4),i.value.returnHide?(v(),x(m,{key:0,class:"q-pa-sm q-mt-md"},{default:t(()=>[e(M,{rounded:"",class:C(o(u).dark.isActive?"bg-grey-9":"bg-grey-2")},{avatar:t(()=>[e(o(g),{name:"reply",style:{width:"50px"}})]),action:t(()=>[Ge]),default:t(()=>[n(" "+_(w.value)+" ",1)]),_:1},8,["class"])]),_:1})):S("",!0)]),_:1})]),a("div",$e,[e(m,{class:"q-pa-xs"},{default:t(()=>[e(P,{class:"row q-pa-none"},{default:t(()=>[e($,{color:"red","text-color":"white",size:"md"},{default:t(()=>[n("2\uBC88")]),_:1}),e(Y),a("div",Pe,[i.value.sendCancelHide?(v(),x(o(y),{key:0,outline:"",color:"teal",dense:"",class:"q-pr-md",onClick:r[0]||(r[0]=s=>L("1","Y","\uC2B9\uC778\uCDE8\uC18C",c.rowsSel.length))},{default:t(()=>[e(O,{color:"orange",floating:""},{default:t(()=>[n(_(se.value.status_3),1)]),_:1}),e(o(g),{name:"check",size:"xs",class:"q-mr-xs"}),n(" \uC2B9\uC778\uCDE8\uC18C ")]),_:1})):S("",!0),i.value.sendHide?(v(),x(o(y),{key:1,outline:"",color:"blue",dense:"",class:"q-pr-md",onClick:r[1]||(r[1]=s=>L("3","N","\uC2B9\uC778\uD558\uAE30",c.rowsSel.length))},{default:t(()=>[e(O,{color:"orange",floating:""},{default:t(()=>[n(_(c.rowsSel.length),1)]),_:1}),e(o(g),{name:"check",size:"xs",class:"q-mr-xs"}),n(" \uC2B9\uC778\uD558\uAE30 ")]),_:1})):S("",!0),i.value.sendHide?(v(),x(o(y),{key:2,outline:"",color:"red",dense:"",class:"q-pr-md",onClick:X},{default:t(()=>[e(O,{color:"orange",floating:""},{default:t(()=>[n(_(c.rowsSel.length),1)]),_:1}),e(o(g),{name:"reply",size:"xs",class:"q-mr-xs"}),n(" \uBC18\uB824\uD558\uAE30 ")]),_:1})):S("",!0)])]),_:1}),a("div",Ze,[(v(!0),ge(xe,null,_e(c.rowsSel,s=>(v(),x(m,{flat:"",bordered:"",style:{width:"100%"},key:s.workNo,class:"q-mb-sm"},{default:t(()=>[a("div",Xe,[e(m,{class:"col-xs-12 col-sm-1"},{default:t(()=>[Ke,a("div",{class:C(["text-center q-pa-xs",o(u).screen.xs?"":"row flex-center"]),style:{height:"100%"}},_(s.seq),3)]),_:2},1024),e(m,{class:"col-xs-12 col-sm-7"},{default:t(()=>[et,a("div",{class:"q-pa-xs",innerHTML:s.targetDoc},null,8,tt)]),_:2},1024),e(m,{class:"col-xs-12 col-sm-3"},{default:t(()=>[st,a("div",at,[a("span",lt,[n(" 1. "+_(s.evaS),1),ot]),a("span",rt,[n(" 2. "+_(s.evaA),1),nt]),a("span",ct,[n(" 3. "+_(s.evaB),1),it]),a("span",dt,[n(" 4. "+_(s.evaC),1),ut]),a("span",mt," 5. "+_(s.evaD),1)])]),_:2},1024),e(m,{class:"col-xs-12 col-sm-1"},{default:t(()=>[pt,a("div",{class:C(["text-center q-pa-xs",o(u).screen.xs?"":"row flex-center"]),style:{height:"100%"}},_(s.weight),3)]),_:2},1024)])]),_:2},1024))),128))])]),_:1})])]),e(R,{spaced:""})]),_:1}),e(ye,{persistent:"",modelValue:D.value,"onUpdate:modelValue":r[3]||(r[3]=s=>D.value=s)},{default:t(()=>[e(m,{flat:"",bordered:"",style:{"max-width":"450px",width:"100%"}},{default:t(()=>[e(Se,null,{default:t(()=>[e(o(g),{name:"list_alt"}),ft,e(Y),U((v(),x(o(y),{dense:"",flat:"",icon:"close"},{default:t(()=>[e(qe,null,{default:t(()=>[n(" \uB2EB\uAE30 ")]),_:1})]),_:1})),[[T]])]),_:1}),e(ke,{class:""},{default:t(()=>[e(m,{class:"q-pa-md"},{default:t(()=>[e(G,null,{default:t(()=>[e(we,{autofocus:"","input-style":{minHeight:"150px"},outlined:"",type:"textarea",class:"q-pt-sm",modelValue:w.value,"onUpdate:modelValue":r[2]||(r[2]=s=>w.value=s),color:o(u).dark.isActive?"orange":"teal","label-color":o(u).dark.isActive?"orange":"teal",label:"\uBC18\uB824\uC0AC\uC720",rows:5,autogrow:!0},null,8,["modelValue","color","label-color"])]),_:1})]),_:1})]),_:1}),e(R,{size:"2px",color:"grey"}),e(be,{align:"right",class:"q-pa-md"},{default:t(()=>[U((v(),x(o(y),{color:"red",onClick:re},{default:t(()=>[e(o(g),{class:"q-mr-xs",name:"save",size:"xs"}),n(" \uBC18\uB824\uD558\uAE30 ")]),_:1})),[[T]]),U((v(),x(o(y),{color:"grey"},{default:t(()=>[e(o(g),{class:"q-mr-xs",name:"close",size:"xs"}),n(" \uB2EB\uAE30 ")]),_:1})),[[T]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Ot as default};
