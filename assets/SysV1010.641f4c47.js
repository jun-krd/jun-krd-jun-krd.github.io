import{Q as W}from"./QSpace.601fa16e.js";import{Q as _e}from"./QTooltip.f083d71e.js";import{Q as X}from"./QBar.57bcd1b8.js";import{Q as ge}from"./QSelect.a2b6cad7.js";import{b4 as be,r as n,ab as D,j as xe,p as ye,k as we,o as Se,R as h,a6 as V,Z as t,U as o,W as K,n as e,X as r,$ as v,a0 as E,S as F,a8 as ee,a5 as B,Y as I,a1 as N,a2 as ae,bu as R,bE as De,a7 as z,V as c,b5 as Ne,b6 as Ce}from"./index.796e9a09.js";import{Q as te}from"./QToolbar.b2280906.js";import{Q as ke}from"./QChip.56e9ec7c.js";import{Q as qe}from"./QImg.fa288235.js";import{Q as u}from"./QField.e93cf12f.js";import{Q as Qe}from"./QForm.7bb4004a.js";import{Q as We}from"./QPage.976dcdc8.js";import{A as Ve}from"./main.esm.a63d2102.js";import{u as Ie}from"./use-quasar.737b824d.js";import{api as g}from"./axios.cdca92d4.js";import{l as ze}from"./lodash.78b3cd6a.js";import{j as Ae,n as Oe}from"./json-util.11434787.js";import{c as A}from"./comm-util.95181954.js";import{u as Ue}from"./setYearInfo.de2541ce.js";import"./position-engine.adea6890.js";import"./selection.e36e704c.js";import"./QItemSection.ae9ab285.js";import"./QItemLabel.c03d9e19.js";import"./QMenu.c288f19f.js";import"./rtl.276c3f1b.js";import"./_commonjsHelpers.b8add541.js";const O=C=>(Ne("data-v-6fff94f1"),C=C(),Ce(),C),Ye={class:"row q-col-gutter-md"},Ee=O(()=>o("span",{class:"text-subtitle2 q-px-sm"},"\uC0AC\uC6A9\uC815\uBCF4 \uB9AC\uC2A4\uD2B8",-1)),Fe={key:0},Be={key:1},Re={class:"row q-col-gutter-md"},Te={class:"q-gutter-xs"},$e={key:0,class:"col-12 col-lg-4"},Je=O(()=>o("span",{class:"text-subtitle2 q-px-sm"},"\uC790\uB8CC \uC870\uD68C/\uC870\uC815",-1)),He=O(()=>o("span",{class:"text-blue text-bold"},"\uC774\uBBF8\uC9C0",-1)),Me=O(()=>o("span",{class:"text-blue text-bold"},"\uB2C9\uB124\uC784, \uCC38\uACE0\uC0AC\uD56D",-1)),Pe={class:"q-gutter-xs"},je={class:"q-pa-md"},Ge={class:"row q-col-gutter-xl"},Ze={class:"col-12 col-md-6"},Le={class:"col-12 col-md-6"},Xe={class:"self-center full-width no-outline",tabindex:"0"},Ke={class:"self-center full-width no-outline",tabindex:"0"},ea={class:"row q-col-gutter-xl"},aa={class:"col-12 col-md-6 q-gutter-y-sm"},ta={class:"self-center full-width no-outline",tabindex:"0"},la={class:"self-center full-width no-outline",tabindex:"0"},sa={class:"self-center full-width no-outline",tabindex:"0"},oa={class:"self-center full-width no-outline",tabindex:"0"},na={class:"self-center full-width no-outline",tabindex:"0"},ia={class:"col-12 col-md-6 q-gutter-y-sm"},ra={class:"self-center full-width no-outline",tabindex:"0"},da={class:"self-center full-width no-outline",tabindex:"0"},ca={class:"self-center full-width no-outline",tabindex:"0"},ua={__name:"SysV1010",setup(C){const b=Ue(),k=Ie();let f=null;n(null);const q=n(null),T=n(null),le=n(null),$=n(null),p=D({deptCd:"",word:""}),m=D({icon:"",message:"",color:""}),x=n(!0),y=n(!0),Q=n(!0),se=()=>{y.value=!y.value,y.value?Q.value=!0:Q.value=!1},J=n(500),oe=xe(()=>({height:`${J.value}px`})),_=n(null),H=D({rows:[]}),M=l=>{const s=l.value;return s&&s.length===8?`${s.slice(0,4)}-${s.slice(4,6)}-${s.slice(6)}`:s};ye(()=>{window.removeEventListener("resize",U)}),we(()=>{Z.value="single",Y(),ve(),fe(),he()}),Se(()=>{window.addEventListener("resize",U),U()});const ne=l=>{_.value=l.api},ie=D({def:{flex:1,sortable:!0,filter:!0,floatingFilter:!1,editable:!1}}),re=D({columns:[{headerName:"",field:"",maxWidth:50,minWidth:50,checkboxSelection:!0,headerCheckboxSelection:!0,filter:!1,pinned:"left"},{headerName:"ID",field:"userId",pinned:"left",maxWidth:100,minWidth:100},{headerName:"\uC131\uBA85",field:"userNm",minWidth:100,maxWidth:100,pinned:"left"},{headerName:"\uB2C9\uB124\uC784",field:"userNmx",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"}},{headerName:"\uC0AC\uC6D0\uBC88\uD638",field:"empCd",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"}},{headerName:"\uC18C\uC18D\uD300",field:"deptNm",maxWidth:100,minWidth:100},{headerName:"\uC9C1\uC704",field:"pstnNm",maxWidth:100,minWidth:100},{headerName:"\uC9C1\uAE09",field:"titlNm",maxWidth:100,minWidth:100},{headerName:"Mobile",field:"mobile",minWidth:150},{headerName:"\uC774\uBA54\uC77C",field:"email",minWidth:150},{headerName:"\uC785\uC0AC\uC77C",field:"inDay",valueFormatter:M,maxWidth:130,minWidth:130,cellStyle:{textAlign:"center"}},{headerName:"\uD1F4\uC0AC\uC77C",field:"outDay",valueFormatter:M,maxWidth:130,minWidth:130,cellStyle:{textAlign:"center"}},{headerName:"\uCC38\uACE0\uC0AC\uD56D",field:"explains",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"}},{headerName:"\uD30C\uC77C\uBA85",field:"filename",maxWidth:100,minWidth:100,cellStyle:{textAlign:"center"}}]}),P=n(null),a=n({userId:"",userNm:"",userNmx:"",empCd:"",deptCd:"",pstnCd:"",titlCd:"",mobile:"",email:"",inDay:"",outDay:"",explains:"",filename:"",filenameX:""}),w=n(),S=n(!1),j=n(!1),G=n(!1),de=l=>{w.value=l.api.getSelectedRows(),S.value=!1,j.value=w.value.length>0,G.value=j.value,w.value.length===1?(pe(w.value[0].userId),S.value=!0,m.icon="edit_note",m.message="\uC218\uC815/\uC0AD\uC81C\uBAA8\uB4DC \uC785\uB2C8\uB2E4",m.color="accent",f="U",x.value=!1):w.value.length>1?(f="D",S.value=!0,m.icon="delete",m.message="\uC0AD\uC81C\uBAA8\uB4DC \uC785\uB2C8\uB2E4",m.color="negative",x.value=!0,a.value=initializeFormData.value):(a.value={},S.value=!1,f="",x.value=!0)},Z=n(null);n(null);const ce=()=>{a.value.inDay=A.unFormatDate(a.value.inDay),a.value.outDay=A.unFormatDate(a.value.outDay),ze.exports.isEqual(a.value,P.value)?k.dialog({dark:!0,title:"\uC548\uB0B4",message:"\uBCC0\uACBD\uB41C \uC790\uB8CC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. "}).onOk(()=>{}).onCancel(()=>{}).onDismiss(()=>{}):me(Ae.dataJsonParse(f,a.value))},L=n(0),ue=l=>(L.value=l,{minHeight:l?`calc(100vh - ${l}px)`:"100vh"}),U=()=>{J.value=window.innerHeight-L.value-180},me=l=>{g.post("/api/sys/sys1010_save",l).then(s=>{if(s.data.rtn==="0"){if(f==="I"){a.value.oldUserId=a.value.userId;let i=[a.value];_.value.applyTransaction({add:i,addIndex:0})}else if(f==="U"){const i=_.value.getSelectedRows();i[0].userId=a.value.userId,i[0].oldUserId=a.value.userId,i[0].userNm=a.value.userNm,i[0].userNmx=a.value.userNmx,i[0].empCd=a.value.empCd,i[0].pstnCd=a.value.pstnCd,i[0].deptCd=a.value.deptCd,i[0].titlCd=a.value.titlCd,i[0].mobile=a.value.mobile,i[0].email=a.value.email,i[0].inDay=a.value.inDay,i[0].outDay=a.value.outDay,i[0].explains=a.value.explains,_.value.applyTransaction({update:i})}else if(f==="D"){const i=_.value.getSelectedRows();_.value.applyTransaction({remove:i})}}let d={};d.rtn=s.data.rtn,d.rtnMsg=s.data.rtnMsg,Oe.notifyView(d)}).catch(s=>{console.log("error: ",s)})},Y=async()=>{try{const l=await g.post("/api/sys/sys1010_list",{paramSetYear:b.setYear,paramDeptCd:p.deptCd,paramSearchWord:p.word});H.rows=l.data.data}catch(l){console.error("Error fetching users:",l)}},pe=async l=>{try{const s=await g.post("/api/sys/sys1010_select",{paramSetYear:b.setYear,paramUserId:l});a.value=s.data.data[0],P.value=JSON.parse(JSON.stringify(a.value)),a.value.inDay=A.formatDate(s.data.data[0].inDay),a.value.outDay=A.formatDate(s.data.data[0].outDay)}catch(s){console.error("Error fetching users:",s)}};async function ve(){try{const l=await g.post("/api/mst/dept_option_list",{paramSetYear:b.setYear});T.value=l.data.data,q.value=JSON.parse(JSON.stringify(T.value)),console.log(JSON.stringify(q.value)),q.value.push({deptCd:"",deptNm:"\uC804\uCCB4"})}catch(l){console.error("Error fetching users:",l)}}async function fe(){try{const l=await g.post("/api/mst/pstn_option_list",{paramSetYear:b.setYear});$.value=l.data.data,console.log("pstn ::: ",JSON.stringify($.value))}catch(l){console.error("Error fetching users:",l)}}async function he(){try{const l=await g.post("/api/mst/titl_option_list",{paramSetYear:b.setYear});le.value=l.data.data}catch(l){console.error("Error fetching users:",l)}}return(l,s)=>(h(),V(We,{class:"q-pa-xs-xs q-pa-sm-md","style-fn":ue},{default:t(()=>[o("div",Ye,[o("div",{class:K(["col-12",{"col-lg-8":Q.value}])},[e(z,{bordered:""},{default:t(()=>[e(X,{class:"q-px-sm"},{default:t(()=>[e(r(v),{name:"list_alt"}),Ee,e(W),e(r(E),{class:"q-pa-xs",rounded:"",color:"grey","text-color":"black",dense:"",size:"0.4rem",onClick:se,icon:y.value?"open_in_full":"close_fullscreen"},{default:t(()=>[e(_e,{class:"bg-amber text-black shadow-4",anchor:"center left",self:"center right"},{default:t(()=>[e(r(v),{name:"open_in_full",size:"0.8rem"}),Q.value?(h(),F("strong",Fe," \uD3BC\uCE58\uAE30 ")):(h(),F("strong",Be," \uCD95\uC18C\uD558\uAE30 "))]),_:1})]),_:1},8,["icon"])]),_:1}),e(ee,{align:"right",class:"q-pa-none"},{default:t(()=>[e(te,{class:"row"},{default:t(()=>[o("div",Re,[e(ge,{dense:"","stack-label":"","options-dense":"",class:"q-pb-sm q-mr-lg","label-color":"orange",modelValue:p.deptCd,"onUpdate:modelValue":[s[0]||(s[0]=d=>p.deptCd=d),Y],options:q.value,"option-value":"deptCd","option-label":"deptNm","option-disable":"inactive","emit-value":"","map-options":"",style:{"min-width":"130px","max-width":"130px"},label:"\uC18C\uC18D\uD300"},null,8,["modelValue","options"]),e(B,{"stack-label":"","bottom-slots":"","label-color":"orange",modelValue:p.word,"onUpdate:modelValue":s[2]||(s[2]=d=>p.word=d),label:"\uAC80\uC0C9",dense:"",class:"q-pb-none",style:{width:"120px"}},{append:t(()=>[p.word!==""?(h(),V(r(v),{key:0,name:"close",onClick:s[1]||(s[1]=d=>p.word=""),class:"cursor-pointer"})):I("",!0)]),_:1},8,["modelValue"])]),e(W),o("div",Te,[e(r(E),{outline:"",color:"positive",dense:"",onClick:Y},{default:t(()=>[e(r(v),{name:"search",size:"xs"}),N(" \uC870\uD68C ")]),_:1})])]),_:1})]),_:1}),e(ae,{size:"3px"}),e(R,{class:"q-pa-xs"},{default:t(()=>[o("div",{style:De(oe.value)},[e(r(Ve),{style:{width:"100%",height:"100%"},class:K(r(k).dark.isActive?"ag-theme-alpine-dark":"ag-theme-alpine"),columnDefs:re.columns,rowData:H.rows,defaultColDef:ie.def,rowSelection:Z.value,onSelectionChanged:de,onGridReady:ne},null,8,["class","columnDefs","rowData","defaultColDef","rowSelection"])],4)]),_:1})]),_:1})],2),y.value?(h(),F("div",$e,[e(Qe,{class:""},{default:t(()=>[e(z,{bordered:""},{default:t(()=>[e(X,{class:"q-px-sm"},{default:t(()=>[e(r(v),{name:"list_alt"}),Je,e(W),S.value?(h(),V(ke,{key:0,size:"sm",outline:"",color:m.color,class:"q-px-md"},{default:t(()=>[e(r(v),{name:m.icon,class:"q-mr-sm",size:"15px"},null,8,["name"]),N(" "+c(m.message),1)]),_:1},8,["color"])):I("",!0)]),_:1}),e(ee,{align:"right",class:"q-pa-none"},{default:t(()=>[e(te,{class:"row"},{default:t(()=>[e(r(v),{name:"info",size:"xs",color:"orange",class:"q-mr-sm"}),He,N("\uC640 "),Me,N("\uB9CC \uC218\uC815\uC774 \uAC00\uB2A5\uD569\uB2C8\uB2E4 "),e(W),o("div",Pe,[G.value?(h(),V(r(E),{key:0,outline:"",color:"primary",dense:"",onClick:ce},{default:t(()=>[e(r(v),{name:"save",size:"xs"}),N(" \uC800\uC7A5 ")]),_:1})):I("",!0)])]),_:1})]),_:1}),e(ae,{size:"3px"}),e(R,{class:"q-pa-none"},{default:t(()=>[e(z,{flat:"",bordered:"",class:"q-ma-xs q-pa-md"},{default:t(()=>[o("div",je,[o("div",Ge,[o("div",Ze,[e(z,{class:"q-pa-xs shadow-7"},{default:t(()=>[e(R,{horizontal:""},{default:t(()=>[e(qe,{"spinner-color":"white",class:"",src:"https://cdn.quasar.dev/img/avatar.png"})]),_:1})]),_:1})]),o("div",Le,[e(u,{label:"\uC0AC\uC6D0ID","label-color":"orange","stack-label":""},{control:t(()=>[o("div",Xe,c(a.value.empCd),1)]),_:1}),e(u,{label:"\uC131\uBA85","label-color":"orange","stack-label":""},{control:t(()=>[o("div",Ke,c(a.value.userNm),1)]),_:1}),e(B,{modelValue:a.value.userNmx,"onUpdate:modelValue":s[3]||(s[3]=d=>a.value.userNmx=d),label:"\uB2C9\uB124\uC784","label-color":r(k).dark.isActive?"green":"blue",disable:x.value},null,8,["modelValue","label-color","disable"])])]),o("div",ea,[o("div",aa,[e(u,{label:"\uC0AC\uC6D0\uBC88\uD638","label-color":"orange","stack-label":""},{control:t(()=>[o("div",ta,c(a.value.empCd),1)]),_:1}),e(u,{label:"\uC18C\uC18D\uD300","label-color":"orange","stack-label":""},{control:t(()=>[o("div",la,c(a.value.deptNm),1)]),_:1}),e(u,{label:"\uC785\uC0AC\uC77C","label-color":"orange","stack-label":""},{control:t(()=>[o("div",sa,c(a.value.inDay),1)]),_:1}),e(u,{label:"\uC804\uD654\uBC88\uD638","label-color":"orange","stack-label":""},{control:t(()=>[o("div",oa,c(a.value.mobile),1)]),_:1}),e(u,{label:"\uC774\uBA54\uC77C","label-color":"orange","stack-label":""},{control:t(()=>[o("div",na,c(a.value.email),1)]),_:1})]),o("div",ia,[e(u,{label:"\uC9C1\uC704","label-color":"orange","stack-label":""},{control:t(()=>[o("div",ra,c(a.value.pstnNm),1)]),_:1}),e(u,{label:"\uC9C1\uAE09","label-color":"orange","stack-label":""},{control:t(()=>[o("div",da,c(a.value.titlNm),1)]),_:1}),e(u,{label:"\uD1F4\uC0AC\uC77C","label-color":"orange","stack-label":""},{control:t(()=>[o("div",ca,c(a.value.outDay),1)]),_:1}),e(B,{disable:x.value,type:"textarea",modelValue:a.value.explains,"onUpdate:modelValue":s[4]||(s[4]=d=>a.value.explains=d),label:"\uCC38\uACE0\uC0AC\uD56D","label-color":r(k).dark.isActive?"green":"blue",autogrow:"",counter:"",maxlength:"100",hint:"100\uC790\uAE4C\uC9C0 \uC785\uB825\uAC00\uB2A5"},null,8,["disable","modelValue","label-color"])])])])]),_:1})]),_:1})]),_:1})]),_:1})])):I("",!0)])]),_:1}))}};var Ya=be(ua,[["__scopeId","data-v-6fff94f1"]]);export{Ya as default};
