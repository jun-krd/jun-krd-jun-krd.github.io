import{Q as c}from"./QImg.fa288235.js";import{j as k,aa as y,r as n,k as Q,R as w,a6 as V,Z as i,U as o,W as d,n as l,X as g,bu as p,a4 as I,V as $,a5 as f,bO as q,a0 as T,a7 as C}from"./index.796e9a09.js";import{Q as z}from"./QItemLabel.c03d9e19.js";import{Q as B}from"./QForm.7bb4004a.js";import{Q as x}from"./QPage.976dcdc8.js";import{F as U,P as N}from"./SessionStorage.36d2cc7a.js";import{u as A}from"./use-quasar.737b824d.js";import{api as F}from"./axios.cdca92d4.js";import{u as O}from"./vue-i18n.c9df62d3.js";import{u as P}from"./setUserInfo.024a2a24.js";import"./QResizeObserver.d2aa1720.js";var W="/assets/bg_login.edbea059.png";const j={class:"row"},J={class:"row"},R=o("div",{class:"self-center"},[o("span",{class:"text-h5 text-weight-bold"},"\uB3D9\uC77C\uC11D\uC720\uC8FC\uC2DD\uD68C\uC0AC"),o("br")],-1),D={class:"text-weight-bold self-center q-mt-md",style:{"font-size":"1.92em"}},se={__name:"SignIn",setup(L){const{t:v}=O(),t=A(),_=k(()=>({hidden:t.screen.lt.sm})),u=y();P();const h=n(null),m=n(null),e=n({id:"",password:"",idSave:!1}),b=()=>{e.value.password=e.value.id,e.value.id!==!0&&(S(),F.post("/api/auth/login",e.value).then(a=>{if(a.data.data.accessToken&&a.data.state===200){sessionStorage.setItem("accessToken",JSON.stringify(a.data.data.accessToken)),sessionStorage.setItem("refreshToken",JSON.stringify(a.data.data.refreshToken)),u.push({path:"/main"});try{N.set("empCd",e.value.id)}catch{}u.push({path:"/main"})}else t.notify({group:!1,icon:"report_problem",message:v("login_check_message"),color:"negative",position:"bottom-right"});return a.data.data}).catch(a=>{console.log(a),console.log("error1")}))},S=()=>{e.value.idSave?t.localStorage.set("idSave",e.value.id):t.localStorage.set("idSave","")};return Q(()=>{e.value.id=t.localStorage.getItem("idSave"),e.value.idSave=!!e.value.id,e.value.idSave?setTimeout(()=>{m.value.focus()},100):e.value.idSave&&setTimeout(()=>{compCd.value.focus()},100)}),(a,r)=>(w(),V(x,null,{default:i(()=>[o("div",j,[o("div",{class:d(["col-sm-6 col-md-8 col-lg-9",_.value])},[l(c,{height:"100vh",src:W})],2),o("div",{class:d(["col-12 col-sm-6 col-md-4 col-lg-3 flex flex-center q-pt-xs-xl q-px-xl",g(t).dark.isActive?"bg-dark":"bg-white"])},[l(C,{flat:"",class:d(g(t).dark.isActive?"bg-dark":"bg-white")},{default:i(()=>[l(p,{class:"q-mb-xl"},{default:i(()=>[l(z,null,{default:i(()=>[o("div",J,[l(I,{square:"",class:"q-mr-sm",size:"md"},{default:i(()=>[l(c,{src:"/src/assets/images/dongil_logo.png"})]),_:1}),R,o("span",D,$(a.$t("project_name")),1)])]),_:1})]),_:1}),l(p,null,{default:i(()=>[l(B,{onSubmit:b,class:"q-gutter-y-lg"},{default:i(()=>[l(f,{ref_key:"userId",ref:h,"label-color":"orange",color:"orange",label:a.$t("login_id"),hint:a.$t("login_id_hint"),modelValue:e.value.id,"onUpdate:modelValue":r[0]||(r[0]=s=>e.value.id=s),"lazy-rules":"",rules:[s=>!!s||a.$t("login_id_hint")]},null,8,["label","hint","modelValue","rules"]),l(f,{ref_key:"passWd",ref:m,"label-color":"orange",color:"orange",type:"password",label:a.$t("login_password"),hint:a.$t("login_password_hint"),modelValue:e.value.id,"onUpdate:modelValue":r[1]||(r[1]=s=>e.value.id=s),"lazy-rules":"",rules:[s=>!!s||a.$t("login_password_hint")]},null,8,["label","hint","modelValue","rules"]),l(q,{modelValue:e.value.idSave,"onUpdate:modelValue":r[2]||(r[2]=s=>e.value.idSave=s),label:a.$t("login_id_save")},null,8,["modelValue","label"]),l(T,{type:"submit",class:"full-width q-mt-xl",unelevated:"",color:"primary",size:"lg",label:a.$t("login_button")},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["class"])],2)]),l(U)]),_:1}))}};export{se as default};
