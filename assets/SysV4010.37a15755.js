import{Q as O}from"./QBar.57bcd1b8.js";import{Q as me}from"./QSelect.a2b6cad7.js";import{Q as N}from"./QSpace.601fa16e.js";import{b4 as pe,r as n,j as ve,ab as fe,p as ge,k as _e,o as he,R as x,a6 as S,Z as r,U as d,n as t,X as o,$ as u,a8 as Y,a5 as be,W as q,a2 as Z,bu as J,bE as W,V as g,a7 as U,a1 as $,Y as D,S as xe,a0 as X,b5 as ye,b6 as ke}from"./index.796e9a09.js";import{Q as K}from"./QToolbar.b2280906.js";import{Q as we}from"./QTree.7d3edce8.js";import{Q as Se}from"./QChip.56e9ec7c.js";import{Q as qe}from"./QEditor.d9097de0.js";import{Q as De}from"./QPage.976dcdc8.js";import"./main.esm.a63d2102.js";import{u as ze}from"./use-quasar.737b824d.js";import{api as z}from"./axios.cdca92d4.js";import{l as ee}from"./lodash.78b3cd6a.js";import{j as ae,n as Ie}from"./json-util.11434787.js";import"./QField.e93cf12f.js";import"./QItemSection.ae9ab285.js";import"./QItemLabel.c03d9e19.js";import"./QMenu.c288f19f.js";import"./position-engine.adea6890.js";import"./selection.e36e704c.js";import"./rtl.276c3f1b.js";import"./QTooltip.f083d71e.js";import"./_commonjsHelpers.b8add541.js";const te=y=>(ye("data-v-420e6ca3"),y=y(),ke(),y),Qe={class:"row q-col-gutter-md"},Ee={class:"col-12 col-md-3"},Ve=te(()=>d("span",{class:"text-subtitle2 q-px-sm"},"\uD504\uB85C\uADF8\uB7A8 \uB9AC\uC2A4\uD2B8",-1)),Ce={class:"row items-center"},Ae={class:"text-bold text-blue"},Be={class:"row items-center"},Ne={class:"row items-center"},Ue={class:""},$e={class:"col-12 col-md-9"},Pe=te(()=>d("span",{class:"text-subtitle2 q-px-sm"},"\uD504\uB85C\uADF8\uB7A8 \uC0AC\uC6A9\uC124\uBA85\uC11C \uAD00\uB9AC (\uAD00\uB9AC\uC790\uC6A9)",-1)),Te={key:0,class:"text-subtitle1 text-bold shadow-5 q-px-lg q-py-xs bg-secondary rounded-borders"},Fe={__name:"SysV4010",setup(y){const l=ze(),P=n(500),T=ve(()=>({height:`${P.value}px`})),I=n([]),_=n(null),p=n(""),F=n(null),h=n(null),v=n(null),Q=n(null),L=n(null),oe=()=>{p.value="",F.value.focus()},se=n(null),i=n({progId:"",contents:""});n(!0);const c=fe({icon:"",message:"",color:""});let f="";const E=n(!1),k=n(!1),w=n(!1),m=n({submenuName:"",menuData:{}}),le=()=>{m.value.menuData=M(I.value,_.value),m.value.menuData?(w.value=!0,m.value.menuData.children.length===0&&(v.value=m.value.menuData.progId,Q.value=m.value.menuData.label,ce(v.value),setTimeout(()=>{L.value.focus()},100))):(w.value=!1,k.value=!1,v.value=null,Q.value=null,i.value.progId=null,i.value.contents=null)};function M(s,a){for(const e of s){if(e.id===a)return e;if(e.children){const b=M(e.children,a);if(b!==null)return b}}return null}const j=n(0),ne=s=>(j.value=s,{minHeight:s?`calc(100vh - ${s}px)`:"100vh"}),V=()=>{P.value=window.innerHeight-j.value-180};ge(()=>{window.removeEventListener("resize",V)}),_e(()=>{ue(),setTimeout(()=>{R()},500)}),he(()=>{window.addEventListener("resize",V),V()});const re=()=>{ee.exports.isEqual(i.value,se.value)?l.dialog({dark:!0,title:"\uC548\uB0B4",message:"\uBCC0\uACBD\uB41C \uC790\uB8CC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4. "}).onOk(()=>{}).onCancel(()=>{}).onDismiss(()=>{}):(H(ae.dataJsonParse(f,i.value)),_.value=null)},ie=()=>{f="D",l.dialog({dark:!0,title:"\uC790\uB8CC\uC0AD\uC81C",message:"\uC120\uD0DD\uB41C \uC790\uB8CC\uB97C \uC0AD\uC81C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? ",ok:{push:!0,color:"negative"},cancel:{push:!0,color:"grey-7"}}).onOk(()=>{H(ae.dataJsonParse(f,i.value)),_.value=null}).onCancel(()=>{}).onDismiss(()=>{})},R=()=>{G()};let C=[];const A=n([]);function de(s){C=[];const a={};return s.forEach(e=>{a[e.menuId]={...e,children:[]}}),Object.values(a).forEach(e=>{if(A.value.push(e.id),e.menuParent==="#")C.push(e),m.value.submenuName=e.labelExt,m.value.menuData={};else{const b=a[e.menuParent]||a[e.menuId];b&&b.children.push(e)}}),C}const G=async()=>{const s={paramGroupCd:h.value};try{const a=await z.post("/api/sys/menu_sub_list",s);I.value=de(a.data.data)}catch(a){console.error("Error fetching users:",a)}},ce=async s=>{const a={paramProgId:s};try{const e=await z.post("/api/sys/sys4010_docA_select",a);ee.exports.isEmpty(e.data.data)?(f="I",i.value.progId=v.value,i.value.contents="",E.value=!0,c.icon="edit_note",c.message="\uC2E0\uADDC\uBAA8\uB4DC \uC785\uB2C8\uB2E4",c.color="orange",k.value=!1):(f="U",i.value.progId=e.data.data[0].progId,i.value.contents=e.data.data[0].contents,E.value=!0,c.icon="edit_note",c.message="\uC218\uC815/\uC0AD\uC81C\uBAA8\uB4DC \uC785\uB2C8\uB2E4",c.color="orange",k.value=!0)}catch(e){console.error("Error fetching users:",e)}},H=s=>{z.post("/api/sys/sys4010_docA_save",s).then(a=>{a.data.rtn==="0"&&f==="I"&&(i.value.oldUserId=i.value.userId),G();let e={};e.rtn=a.data.rtn,e.rtnMsg=a.data.rtnMsg,Ie.notifyView(e)}).catch(a=>{console.log("error: ",a)})},B=n([]),ue=async()=>{try{const s=await z.post("/api/sys/prog_group_list",{paramUserId:""});B.value=[],s.data.data.forEach(a=>{h.value||(h.value=a.groupCd),B.value.push(a)})}catch(s){console.error("Error fetching users:",s)}};return(s,a)=>(x(),S(De,{class:"q-pa-xs-xs q-pa-sm-md","style-fn":ne},{default:r(()=>[d("div",Qe,[d("div",Ee,[t(U,{bordered:""},{default:r(()=>[t(O,{class:"q-px-sm"},{default:r(()=>[t(o(u),{name:"list_alt"}),Ve]),_:1}),t(Y,{align:"right",class:"q-pa-none"},{default:r(()=>[t(K,{class:"row"},{default:r(()=>[t(me,{"stack-label":"",dense:"",style:{width:"100px"},"label-color":"orange",label:"\uBA54\uC778\uADF8\uB8F9\uBA85",modelValue:h.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>h.value=e),R],options:B.value,"option-value":"groupCd","option-label":"groupNm","options-dense":"","emit-value":"","map-options":""},null,8,["modelValue","options"]),t(N),t(be,{dense:"","stack-label":"","label-color":"orange",ref_key:"filterRef",ref:F,modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=e=>p.value=e),label:"\uD504\uB85C\uADF8\uB7A8\uAC80\uC0C9",style:{width:"130px"},class:""},{append:r(()=>[t(o(u),{size:"xs",name:p.value!==""?"clear search":"search",class:q(["cursor-pointer",p.value!==""?"q-pr-md":""]),onClick:oe},null,8,["name","class"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(Z,{size:"3px"}),t(J,{class:"q-pa-xs"},{default:r(()=>[d("div",{style:W(T.value),class:q(["q-editor q-py-sm",o(l).dark.isActive?"bg-dark":"bg-white"])},[t(we,{dense:"",nodes:I.value,"node-key":"id",filter:p.value,expanded:A.value,"onUpdate:expanded":a[2]||(a[2]=e=>A.value=e),"no-connectors":"",selected:_.value,"onUpdate:selected":a[3]||(a[3]=e=>_.value=e),onClick:le},{"header-folder":r(e=>[d("div",Ce,[t(o(u),{color:"blue",size:"12px",class:"q-mr-sm",name:e.node.icon||"share"},null,8,["name"]),d("div",Ae,g(s.$te(e.node.labelExt)?s.$t(e.node.labelExt):e.node.label),1)])]),"header-file":r(e=>[d("div",Be,[t(o(u),{color:e.node.docAyn==="Y"?o(l).dark.isActive?"white":"dark":o(l).dark.isActive?"grey-7":"grey-5",class:q([e.node.docAyn==="Y"?"text-bold":"","q-mr-sm"]),size:"12px",name:e.node.icon||"share"},null,8,["color","class","name"]),d("div",{class:q(e.node.docAyn==="Y"?o(l).dark.isActive?"text-bold text-white":"text-bold text-dark":o(l).dark.isActive?"text-grey-5":"text-grey-7")},g(s.$te(e.node.labelExt)?s.$t(e.node.labelExt):e.node.label),3)])]),"default-header":r(e=>[d("div",Ne,[t(o(u),{color:o(l).dark.isActive?"white":"dark",size:"12px",class:"q-mr-sm",name:e.node.icon||"share"},null,8,["color","name"]),d("div",Ue,g(s.$te(e.node.labelExt)?s.$t(e.node.labelExt):e.node.label),1)])]),_:1},8,["nodes","filter","expanded","selected"])],6)]),_:1})]),_:1})]),d("div",$e,[t(U,{bordered:""},{default:r(()=>[t(O,{class:"q-px-sm"},{default:r(()=>[t(o(u),{name:"list_alt"}),Pe,t(N),E.value?(x(),S(Se,{key:0,size:"sm",outline:"",color:c.color,class:"q-px-md"},{default:r(()=>[t(o(u),{name:c.icon,class:"q-mr-sm",size:"15px"},null,8,["name"]),$(" "+g(c.message),1)]),_:1},8,["color"])):D("",!0)]),_:1}),t(Y,{align:"right",class:"q-pa-none"},{default:r(()=>[t(K,{class:"row"},{default:r(()=>[v.value?(x(),xe("span",Te,g(Q.value)+" ( "+g(v.value)+" )",1)):D("",!0),t(N),w.value?(x(),S(o(X),{key:1,outline:"",dense:"",color:"primary",onClick:re,class:"q-px-sm q-mr-sm"},{default:r(()=>[t(o(u),{class:"q-mr-xs",name:"save",size:"xs"}),$(" \uC800\uC7A5 ")]),_:1})):D("",!0),k.value?(x(),S(o(X),{key:2,outline:"",dense:"",color:"negative",onClick:ie,class:"q-px-sm q-mr-sm"},{default:r(()=>[t(o(u),{class:"q-mr-xs",name:"delete",size:"xs"}),$(" \uC0AD\uC81C ")]),_:1})):D("",!0)]),_:1})]),_:1}),t(Z,{size:"3px"}),t(J,{class:"q-pa-xs"},{default:r(()=>[t(U,{flat:"",bordered:"",class:"q-ma-xs q-pa-none"},{default:r(()=>[t(qe,{disable:!w.value,class:"q-editor",style:W(T.value),ref_key:"contentsFocus",ref:L,modelValue:i.value.contents,"onUpdate:modelValue":a[4]||(a[4]=e=>i.value.contents=e),dense:o(l).screen.lt.md,toolbar:[[{label:o(l).lang.editor.align,icon:o(l).iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]},{label:o(l).lang.editor.align,icon:o(l).iconSet.editor.align,fixedLabel:!0,options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:o(l).lang.editor.formatting,icon:o(l).iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:o(l).lang.editor.fontSize,icon:o(l).iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:o(l).lang.editor.defaultFont,icon:o(l).iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"],["viewsource"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},null,8,["disable","style","modelValue","dense","toolbar"])]),_:1})]),_:1})]),_:1})])])]),_:1}))}};var ca=pe(Fe,[["__scopeId","data-v-420e6ca3"]]);export{ca as default};
