import{Q as G}from"./QBanner.ac724ef6.js";import{r as i,ab as y,j as ne,p as re,k as ce,o as ie,ay as de,R as S,a6 as z,Z as l,n as t,U as e,W as _,X as c,$ as V,a1 as n,a4 as x,V as d,a7 as u,a2 as ue,bu as me,a0 as I,Y as he,bE as _e,S as pe,ad as xe,bK as b,F as ge}from"./index.796e9a09.js";import{Q as w}from"./QChip.56e9ec7c.js";import{Q}from"./QSpace.601fa16e.js";import{Q as ve,a as B}from"./QBreadcrumbs.a225de0b.js";import{Q as fe}from"./QItemLabel.c03d9e19.js";import{Q as be}from"./QBadge.d49aff15.js";import{Q as F}from"./QToolbar.b2280906.js";import{Q as we}from"./QPage.976dcdc8.js";import{A as ke}from"./main.esm.a63d2102.js";import"./lodash.78b3cd6a.js";import{api as N}from"./axios.cdca92d4.js";import{j as $,n as Ce}from"./json-util.11434787.js";import{u as qe}from"./use-quasar.737b824d.js";import{u as ye}from"./setUserInfo.024a2a24.js";import{u as Se}from"./setYearInfo.de2541ce.js";import"./_commonjsHelpers.b8add541.js";const Ve={class:"row"},Qe={class:"col-xs-12 col-sm-12 col-lg-8"},Ee={class:"row q-col-gutter-x-sm"},He={class:"col-xs-12 col-sm-6"},De=e("span",{class:"text-subtitle1 text-bold"}," \uBAA9\uD45C\uC5D0\uB300\uD55C \uC131\uACFC\uBC0F\uC5C5\uC801\uC5D0 \uB300\uD55C \uD3C9\uAC00\uC791\uC5C5\uC785\uB2C8\uB2E4.",-1),Ue=e("br",null,null,-1),ze=e("span",{class:"text-teal text-bold"},"\uD3C9\uAC00\uB300\uAE30",-1),Be=e("br",null,null,-1),Ne=e("span",{class:"text-teal text-bold"},"\uD3C9\uAC00\uB9C8\uAC10",-1),Ae=e("br",null,null,-1),Pe={class:"col-xs-12 col-sm-6 q-pt-xs-xs"},Te={class:"row"},Me={class:"col-4"},Le={class:"col-4"},Re={class:"col-4"},Ye={class:"row"},We={class:"col-4"},Oe={class:"col-4"},Ge={class:"col-xs-12 col-sm-12 col-lg-4 q-my-sm"},Ie={class:"row"},Fe={class:"text-bold text-subtitle2 q-pr-sm text-orange"},$e={class:"col-xs-12 col-md-12 col-lg-4"},je={class:"col-xs-12 col-md-12 col-lg-8"},Je=e("div",{class:"row q-gutter-x-sm"},null,-1),Ze={class:"row"},Ke={class:"row"},Xe=e("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uC21C\uBC88",-1),et=e("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uBAA9\uD45C\uC124\uC815",-1),tt=["innerHTML"],st=e("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uAE30\uC900\uC124\uC815",-1),lt={class:"q-pa-xs"},ot={class:"q-px-sm"},at=e("br",null,null,-1),nt={class:"q-px-sm"},rt=e("br",null,null,-1),ct={class:"q-px-sm"},it=e("br",null,null,-1),dt={class:"q-px-sm"},ut=e("br",null,null,-1),mt={class:"q-px-sm"},ht=e("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uC131\uACFC/\uC5C5\uC801",-1),_t=["innerHTML"],pt=e("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uAC00\uC911\uCE58",-1),xt=e("div",{class:"bg-deep-orange-3 text-center text-subtitle2 text-bold q-px-xs"},"\uC790\uAE30\uD3C9\uAC00",-1),gt={class:"row"},vt={class:"col-xs-12 col-sm-5 text-center"},ft={class:"col-xs-12 col-sm-2 text-center self-center text-subtitle1 text-bold"},j=46,Tt={__name:"HpeV2020",setup(bt){const k=ye(),J=Se();i(!1);const h=y({rows:[]}),A=i(200),Z=i(135),P=i(90),E=i(135),m=qe();let T=null;const K=i(0),M=i(300);ne(()=>({height:`${M.value}px`}));const C=i(null);i(null);const X=o=>{C.value=o.api,C.value.setGridOption("headerHeight",45),C.value.setGridOption("rowHeight",45),C.value.deselectAll()},ee=y({group:{flex:1,sortable:!0,filter:!0,floatingFilter:!1,editable:!1}}),te=y({group:[{headerName:"#",width:50,pinned:"left",sortable:!1,filter:!1,valueGetter:function(o){return o.node.rowIndex+1}},{headerName:"\uC131\uBA85",field:"evtEmpNm",minWidth:80,maxWidth:80,resizable:!0},{headerName:"\uC18C\uC18D\uD300",field:"evtDeptNm",minWidth:100,resizable:!0},{headerName:"\uC9C1\uAE09",field:"evtTitlNm",minWidth:80,maxWidth:80,resizable:!0},{headerName:"\uC9C4\uD589\uC0C1\uD0DC",field:"statusMessage",minWidth:105,maxWidth:105,cellStyle:o=>o.data.authCnt0+o.data.authCnt1+o.data.authCnt2+o.data.authCnt3+o.data.authCnt4+o.data.authCnt5===0?m.dark.isActive?{color:"orange"}:{color:"orange"}:m.dark.isActive?{color:"teal"}:{color:"teal"}}]}),L=i({selfPoint:0,markPoint:0,isEvalOk:!1});re(()=>{console.log("onBeforeUnmount...."),window.removeEventListener("resize",D)}),ce(()=>{console.log("onBeforeMount...."),Y()});const g=i(null),q=y({height:0});ie(()=>{console.log("onMounted...."),window.addEventListener("resize",D),D(),g.value&&(q.height=g.value.clientHeight,console.log("size 1 : ",q.height))}),de(()=>{console.log("onUpdated...."),g.value&&(q.height=g.value.clientHeight,console.log("size 2 : ",q.height))}),i({stdYear:"",evtEmpCd:"",seq:0,returnDoc:"",status:""});const p=i([]),se=o=>{p.value=o.api.getSelectedRows(),p.value.length===1&&W(p.value[0].stdYear,p.value[0].evsEmpCd,p.value[0].evtEmpCd)},H=i({cancel:0}),R=i(0),le=o=>(R.value=o,{minHeight:o?`calc(100vh - ${o}px)`:"100vh"}),D=()=>{M.value=window.innerHeight-R.value-730},v=(o,r)=>{switch(o){case"S":r.markPoint=100;break;case"A":r.markPoint=90;break;case"B":r.markPoint=80;break;case"C":r.markPoint=70;break;case"D":r.markPoint=60;break;default:r.markPoint=0;break}console.log("form : ",JSON.stringify(r)),O($.dataJsonParse("I",r))},oe=o=>{m.dialog({dark:!0,title:"\uD3C9\uAC00\uCDE8\uC18C",message:"\uC120\uD0DD\uB41C "+o+"\uAC74 \uD3C9\uAC00\uC790\uB8CC\uB97C \uBAA8\uB450 \uCDE8\uC18C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C? ",ok:{push:!0,color:"negative"},cancel:{push:!0,color:"grey-7"}}).onOk(()=>{T="D";let r=[],s=[];for(let a=0;a<h.rows.length;a++){let U='{"mode": "'+T+'","data":'+JSON.stringify(h.rows[a])+"}";s.push(U)}O($.jsonFiller(r,s)),setTimeout(()=>{W(p.value[0].stdYear,p.value[0].evsEmpCd,p.value[0].evtEmpCd)},500)}).onCancel(()=>{}).onDismiss(()=>{})},f=i({totalCnt:0,status_0:0,status_3:0,status_4:0,status_5:0}),Y=async()=>{try{const o=await N.post("/api/hpe/hpe2020_list",{paramSetYear:J.setYear,paramEmpCd:k.setEmpCd});h.rows=o.data.data,h.rows.length===0&&(P.value=220);const r=h.rows.length*j;A.value=P.value+r}catch(o){console.error("Error fetching users:",o)}},W=async(o,r,s)=>{try{const a=await N.post("/api/hpe/hpe2020_select_list",{paramSetYear:o,paramEvsEmpCd:r,paramEvtEmpCd:s});h.rowsSel=a.data.data,L.value.selfPoint=0,L.value.markPoint=0,h.rowsSel.length>0?E.value=90:E.value=135;const U=h.rowsSel.length*j;Z.value=E.value+U,K.value+=1}catch(a){console.error("Error fetching users:",a)}},O=o=>{N.post("/api/hpe/hpe2020_save",o).then(r=>{let s={};s.rtn=r.data.rtn,s.rtnMsg=r.data.rtnMsg,Ce.notifyView(s)}).catch(r=>{console.log("error: ",r)})},ae={localeText:{noRowsToShow:"\uC870\uD68C \uACB0\uACFC\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4."}};return(o,r)=>(S(),z(we,{class:"q-pa-xs-xs q-pa-sm-md","style-fn":le},{default:l(()=>[t(u,{class:"q-pa-sm"},{default:l(()=>[e("div",Ve,[e("div",Qe,[e("div",Ee,[e("div",He,[t(G,{rounded:"",class:_(c(m).dark.isActive?"bg-grey-9":"bg-grey-3"),style:{height:"100%"}},{avatar:l(()=>[t(c(V),{name:"menu_book",color:"primary",size:"md"})]),default:l(()=>[De,Ue,n(" 1. "),ze,n(" \uC790\uB8CC\uB9CC \uD3C9\uAC00\uD558\uC2E4 \uC218 \uC788\uC2B5\uB2C8\uB2E4."),Be,n(" 2. \uC120\uD0DD\uD55C \uC9C1\uC6D0\uC758 \uD3C9\uAC00\uC644\uB8CC \uC2DC "),Ne,n("\uBC84\uD2BC\uC774 \uD65C\uC131\uD654\uB429\uB2C8\uB2E4."),Ae]),_:1},8,["class"])]),e("div",Pe,[t(G,{rounded:"",class:_(c(m).dark.isActive?"bg-grey-9":"bg-grey-3")},{default:l(()=>[e("div",Te,[e("div",Me,[t(w,null,{default:l(()=>[t(x,{color:"blue","text-color":"white"},{default:l(()=>[n(d(f.value.totalCnt),1)]),_:1}),n(" \uC804\uCCB4\uAC74\uC218 ")]),_:1})]),e("div",Le,[t(w,null,{default:l(()=>[t(x,{color:"teal","text-color":"white"},{default:l(()=>[n(d(f.value.status_0),1)]),_:1}),n(" \uBAA9\uD45C\uC9C4\uD589\uC911 ")]),_:1})]),e("div",Re,[t(w,null,{default:l(()=>[t(x,{color:"grey","text-color":"white"},{default:l(()=>[n(d(f.value.status_3),1)]),_:1}),n(" \uC790\uAE30\uD3C9\uAC00\uC9C4\uD589 ")]),_:1})])]),e("div",Ye,[t(Q),e("div",We,[t(w,null,{default:l(()=>[t(x,{color:"orange","text-color":"white"},{default:l(()=>[n(d(f.value.status_4),1)]),_:1}),n(" \uD3C9\uAC00\uB300\uAE30 ")]),_:1})]),e("div",Oe,[t(w,null,{default:l(()=>[t(x,{color:"grey","text-color":"white"},{default:l(()=>[n(d(f.value.status_5),1)]),_:1}),n(" \uC131\uACFC\uD3C9\uAC00\uC644\uB8CC ")]),_:1})])])]),_:1},8,["class"])])])]),e("div",Ge,[t(u,{class:_(["q-ml-sm-md q-pa-sm",c(m).screen.xs?"q-mt-xs":"row flex-center"]),style:{height:"100%"}},{default:l(()=>[e("div",Ie,[t(Q),e("span",Fe,[n("\uD3C9\uAC00\uC790"),t(c(V),{name:"chevron_right",size:"xs"})]),t(ve,{separator:"|",class:"text-orange text-bold","active-color":"secondary"},{default:l(()=>[t(B,{icon:"room_preferences",label:c(k).setDeptNm,style:{width:"90px"}},null,8,["label"]),t(B,{icon:"star",label:c(k).setTitlNm,style:{width:"60px"}},null,8,["label"]),t(B,{icon:"person",label:c(k).setEmpNm,style:{width:"70px"}},null,8,["label"])]),_:1})])]),_:1},8,["class"])])])]),_:1}),t(ue,{spaced:""}),t(u,{class:"q-pa-sm"},{default:l(()=>[t(me,{class:_(["text-center q-pa-sm q-mb-sm",c(m).dark.isActive?"bg-teal-7":"bg-teal-3"])},{default:l(()=>[t(fe,{class:"text-h6"},{default:l(()=>[n("\uC131\uACFC,\uC5C5\uC801 / \uD3C9\uAC00\uD558\uAE30")]),_:1})]),_:1},8,["class"]),e("div",{ref_key:"gridZone",ref:g,class:"row q-col-gutter-x-lg"},[e("div",$e,[t(u,{class:"q-pa-sm"},{default:l(()=>[t(F,{class:"row q-pa-none"},{default:l(()=>[t(x,{color:"red","text-color":"white",size:"md"},{default:l(()=>[n("1\uBC88")]),_:1}),t(Q),t(c(I),{outline:"",color:"grey",dense:"",onClick:Y},{default:l(()=>[t(c(V),{name:"refresh",size:"xs",class:"q-mr-xs"}),n(" \uB2E4\uC2DC \uBD88\uB7EC\uC624\uAE30 ")]),_:1}),H.value.cancel>0?(S(),z(c(I),{key:0,outline:"",color:"deep-orange",dense:"",class:"q-pr-md q-ml-sm",onClick:r[0]||(r[0]=s=>oe(H.value.cancel))},{default:l(()=>[t(be,{color:"orange",floating:""},{default:l(()=>[n(d(H.value.cancel),1)]),_:1}),t(c(V),{name:"delete",size:"xs",class:"q-mr-xs"}),n(" \uD3C9\uAC00\uCDE8\uC18C\uD558\uAE30 ")]),_:1})):he("",!0)]),_:1}),e("div",{style:_e({height:A.value+30+"px"})},[t(c(ke),{style:{width:"100%",height:"100%"},class:_(c(m).dark.isActive?"ag-theme-alpine-dark":"ag-theme-alpine"),columnDefs:te.group,rowData:h.rows,defaultColDef:ee.group,rowSelection:"single",onSelectionChanged:se,onGridReady:X,"grid-options":ae},null,8,["class","columnDefs","rowData","defaultColDef"])],4)]),_:1})]),e("div",je,[t(u,{class:"q-pa-xs"},{default:l(()=>[t(F,{class:"row q-pa-none"},{default:l(()=>[t(x,{color:"red","text-color":"white",size:"md"},{default:l(()=>[n("2\uBC88")]),_:1}),t(Q),Je]),_:1}),e("div",Ze,[(S(!0),pe(ge,null,xe(h.rowsSel,s=>(S(),z(u,{flat:"",bordered:"",style:{width:"100%"},key:s.seq,class:"q-mb-sm"},{default:l(()=>[e("div",Ke,[t(u,{class:"col-xs-12 col-sm-1"},{default:l(()=>[Xe,e("div",{class:_(["text-center q-pa-xs",c(m).screen.xs?"":"row flex-center"]),style:{height:"100%"}},d(s.seq),3)]),_:2},1024),t(u,{class:"col-xs-12 col-sm-4"},{default:l(()=>[et,e("div",{class:"q-pa-xs",innerHTML:s.targetDoc},null,8,tt)]),_:2},1024),t(u,{class:"col-xs-12 col-sm-2"},{default:l(()=>[st,e("div",lt,[e("span",ot,[n(" 1. "+d(s.evaS),1),at]),e("span",nt,[n(" 2. "+d(s.evaA),1),rt]),e("span",ct,[n(" 3. "+d(s.evaB),1),it]),e("span",dt,[n(" 4. "+d(s.evaC),1),ut]),e("span",mt," 5. "+d(s.evaD),1)])]),_:2},1024),t(u,{class:"col-xs-12 col-sm-3"},{default:l(()=>[ht,e("div",{class:"q-pa-xs",innerHTML:s.workDoc},null,8,_t)]),_:2},1024),t(u,{class:"col-xs-12 col-sm-1"},{default:l(()=>[pt,e("div",{class:_(["text-center q-pa-xs",c(m).screen.xs?"":"row flex-center"]),style:{height:"100%"}},d(s.weight),3)]),_:2},1024),t(u,{class:"col-xs-12 col-sm-1"},{default:l(()=>[xt,e("div",{class:_(["text-center q-pa-xs",c(m).screen.xs?"":"row flex-center"]),style:{height:"100%"}},d(s.selfPoint),3)]),_:2},1024)]),t(u,{bordered:"",class:"bg-blue-grey-2 q-mt-xs"},{default:l(()=>[e("div",gt,[e("div",{class:_(["col-xs-12 col-sm-5 text-center self-center text-subtitle1 text-bold",c(m).screen.xs?"":"row flex-center"]),style:{height:"100%"}}," \uD3C9\uAC00\uD558\uAE30 ",2),e("div",vt,[t(b,{"keep-color":"",modelValue:s.markCh,"onUpdate:modelValue":[a=>s.markCh=a,a=>v(a,s)],val:"S",label:"S",color:"deep-orange",class:"text-subtitle1 text-bold"},null,8,["modelValue","onUpdate:modelValue"]),t(b,{"keep-color":"",modelValue:s.markCh,"onUpdate:modelValue":[a=>s.markCh=a,a=>v(a,s)],val:"A",label:"A",color:"blue",class:"text-subtitle1 text-bold"},null,8,["modelValue","onUpdate:modelValue"]),t(b,{"keep-color":"",modelValue:s.markCh,"onUpdate:modelValue":[a=>s.markCh=a,a=>v(a,s)],val:"B",label:"B",color:"cyan",class:"text-subtitle1 text-bold"},null,8,["modelValue","onUpdate:modelValue"]),t(b,{"keep-color":"",modelValue:s.markCh,"onUpdate:modelValue":[a=>s.markCh=a,a=>v(a,s)],val:"C",label:"C",color:"teal",class:"text-subtitle1 text-bold"},null,8,["modelValue","onUpdate:modelValue"]),t(b,{"keep-color":"",modelValue:s.markCh,"onUpdate:modelValue":[a=>s.markCh=a,a=>v(a,s)],val:"D",label:"D",color:"green",class:"text-subtitle1 text-bold"},null,8,["modelValue","onUpdate:modelValue"])]),e("div",ft,"\uD3C9\uAC00\uC810\uC218 : "+d(s.markPoint),1)])]),_:2},1024)]),_:2},1024))),128))])]),_:1})])],512)]),_:1})]),_:1}))}};export{Tt as default};
